(window["webpackJsonpcash-map"]=window["webpackJsonpcash-map"]||[]).push([[1],{84:function(e,t,a){e.exports=a.p+"static/media/line_icon.4fc3c40a.svg"},87:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(0),r=a.n(c),o=a(3),l=a(7),i=a(12),s=a(13),u=a(15),m=a.n(u);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var d=function(){function e(t,a){Object(i.a)(this,e),this.activeAt=t,this.tabs={},this.tabs=a.reduce(function(e,t){var a=Object(c.useState)(m()()),r=Object(n.a)(a,1)[0];return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,Object(l.a)({},r,t))},{})}return Object(s.a)(e,[{key:"titleOpts",get:function(){var e=this;return Object.keys(this.tabs).map(function(t){var a=e.tabs[t].props,n=a.title;return{id:t,icon:a.icon,text:n,active:e.activeAt===n}})}},{key:"contentOpts",get:function(){var e=this;return Object.keys(this.tabs).map(function(t){var a=e.tabs[t].props,n=a.title;return{id:t,className:a.className,children:a.children,active:e.activeAt===n}})}}]),e}(),f=function(e){var t=e.id,a=e.text,n=e.icon,l=void 0===n?"":n,i=e.active,s=void 0!==i&&i,u=e.onActived,m=void 0===u?function(){}:u,b=Object(o.c)(),d=Object(c.useCallback)(function(){return m(a)},[a,m]);return r.a.createElement("button",{type:"button",id:"".concat(t,"-tab"),"data-toggle":"tab","aria-controls":t,style:{},className:"nav-item nav-link ".concat(s?"active":""),onClick:d},l?r.a.createElement("i",{className:"mr-2 ".concat(l)}):null,a in b.messages?b.messages[a]:a)},p=function(){return null},E=function(e){var t=e.children,a=e.activeAt,n=e.style,c=e.className,o=void 0===c?"":c,l=e.onActived,i=void 0===l?function(){}:l,s=new d(a,t);return r.a.createElement("div",{className:"cm-tab ".concat(o),style:n},r.a.createElement("div",{className:"nav nav-tabs"},s.titleOpts.map(function(e){var t=e.id,a=e.icon,n=e.text,c=e.active;return r.a.createElement(f,Object.assign({key:t},{id:t,icon:a,text:n,active:c,onActived:i}))})),r.a.createElement("div",{className:"tab-content"},s.contentOpts.map(function(e){var t=e.id,a=e.className,n=e.active,c=e.children;return n?r.a.createElement("div",{key:t,id:t,"aria-labelledby":"".concat(t,"-tab"),className:"tab-pane fade show active ".concat(a)},c):null})))},v=a(9),O=a(31),g=a(4),h=a(33),y=a(37),j=Symbol("SAVE"),C=function(e){var t=e.show,a=e.className,n=void 0===a?"":a,o=e.icon,l=void 0===o?"fa fa-pencil-square-o":o,i=e.onToggle,s=void 0===i?function(){}:i,u=Object(c.useCallback)(function(){t[1](!0),s()},[t,s]);return r.a.createElement("button",{type:"button",className:n,onClick:u},r.a.createElement("i",{className:l}))},N=function(e){var t=e.show,a=e.desc,o=e.onChange,l=Object(c.useState)(a),i=Object(n.a)(l,2),s=i[0],u=function(e){var t=e.value,a=e.setValue,n=e.onChange;return{onInputChange:Object(c.useCallback)(function(e){return a(e.target.value)},[a]),onModalCallback:Object(c.useCallback)(function(e){j===e&&n(t)},[t,n]),doStopSubmit:Object(c.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),n(t)},[t,n])}}({value:s,setValue:i[1],onChange:o}),m=u.onInputChange,b=u.onModalCallback,d=u.doStopSubmit;return r.a.createElement(y.b,{className:"bg-secondary",show:t,closeByBtn:!0,doCallback:b,title:{icon:"fa fa-pencil-square-o",text:"TITLE_SET_DESC"},btns:[{code:y.a.DISMISS,icon:"fa fa-ban",text:"CANCEL"},{code:j,icon:"fa fa-download",text:"CONFIRM"}]},r.a.createElement("form",{onSubmit:d},r.a.createElement("input",{type:"text",className:"form-control",value:s,onChange:m})))},w=function(e){return Object(n.a)(e.show,1)[0]?r.a.createElement(N,e):null};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var D=function(){var e=Object(c.useState)(!1),t=Object(c.useState)({uid:"",desc:""}),a=Object(n.a)(t,2),o=a[0],l=a[1],i=Object(O.b)(),s=i.sourceKey,u=i.sources,m=function(e){var t=e.edit,a=e.setEdit,n=e.dispatch;return{onSwitch:Object(c.useCallback)(function(e){n({action:"SWITCH",switchTo:e}),window.history.back()},[n]),onDescToggle:Object(c.useCallback)(function(e){return a(e)},[a]),doUpdate:Object(c.useCallback)(function(e){return n({action:"UPDATE",source:k({},t,{desc:e})})},[t,n]),doRemove:Object(c.useCallback)(function(e){return n({action:"REMOVE",source:e})},[n])}}({edit:o,setEdit:l,dispatch:i.dispatch}),b=m.onSwitch,d=m.onDescToggle,f=m.doUpdate,p=m.doRemove;return r.a.createElement("div",null,r.a.createElement(w,{show:e,desc:o.desc,onChange:f}),r.a.createElement(h.b,{onSelect:b,Toggle:u.reduce(function(e,t){return t.uid===s?t.desc:e},"")},u.map(function(t){var a=t.uid,n=t.desc;return"MY_RECORD"===n?r.a.createElement(h.a,{key:a,value:a,desc:n}):r.a.createElement(h.a,{key:a,value:a,desc:n},r.a.createElement(C,{show:e,className:"btn btn-link text-info",onToggle:function(){return d({uid:a,desc:n})}}),r.a.createElement("button",{type:"button",className:"btn btn-link text-danger",onClick:function(){return p({uid:a,desc:n})}},r.a.createElement("i",{className:"fa fa-remove"})))})))},P=function(e){var t=e.syncKey,a=void 0===t?"":t,l=Object(c.useRef)(null),i=Object(c.useState)(a),s=Object(n.a)(i,2),u=s[0],m=s[1],b=Object(c.useState)(""),d=Object(n.a)(b,2),f=d[0],p=d[1],E=Object(c.useState)(!1),h=Object(n.a)(E,2),y=h[0],j=function(e){var t=e.autoFocus,a=e.syncRef,n=e.newKey,r=e.desc,o=e.setNewKey,l=e.setDesc,i=e.setAllowed,s=Object(O.b)(),u=s.sources,m=s.dispatch,b=Object(c.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.trim()&&t.trim()&&[".","#","$","[","]"].indexOf(e)<0&&u.findIndex(function(a){var n=a.uid,c=a.desc;return e.trim()===n.trim()||t.trim()===c.trim()})<0?Object(v.d)(e).then(function(e){var t=e.content;return i(t)}):i(!1)},[u,i]);return Object(c.useEffect)(function(){var e=a.current;t&&e&&e.scrollIntoView()}),{onNewkeyChange:Object(c.useCallback)(function(e){o(e.target.value),b(e.target.value,r)},[r,o,b]),onDescChange:Object(c.useCallback)(function(e){l(e.target.value),b(n,e.target.value)},[n,l,b]),doStopSubmit:Object(c.useCallback)(function(e){e.preventDefault(),e.stopPropagation()},[]),doAdd:Object(c.useCallback)(function(){m({action:"CREATE",source:{uid:n,desc:r}}),o(""),l("")},[n,r,o,l,m])}}({autoFocus:!!a,syncRef:l,newKey:u,desc:f,setNewKey:m,setDesc:p,setAllowed:h[1]}),C=j.onNewkeyChange,N=j.onDescChange,w=j.doStopSubmit,S=j.doAdd;return r.a.createElement(g.b,null,r.a.createElement(g.c,{align:"center"},r.a.createElement(g.a,{className:"form-group",width:{def:12,sm:8,md:6},border:{b:!0}},r.a.createElement("h5",{className:"mb-3"},r.a.createElement("label",null,r.a.createElement("i",{className:"mr-2 fa fa-exchange"}),r.a.createElement(o.a,{tagName:"strong",id:"SWITCH_CLOUD"}))),r.a.createElement("p",{className:"text-light font-italic font-weight-light mb-4"},r.a.createElement(o.a,{id:"SWITCH_DESC"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(D,null)))),r.a.createElement(g.c,{align:"center"},r.a.createElement(g.a,{width:{def:12,sm:8,md:6}},r.a.createElement("h5",{ref:l,className:"mb-3"},r.a.createElement("i",{className:"mr-2 fa fa-plus-square"}),r.a.createElement(o.a,{tagName:"strong",id:"APPEND_SOURCE"})),r.a.createElement("p",{className:"text-light font-italic font-weight-light mb-4"},r.a.createElement(o.a,{id:"APPEND_DESC"})),r.a.createElement("form",{onSubmit:w},r.a.createElement("div",{className:"form-group"},r.a.createElement(o.a,{tagName:"label",id:"SOURCE_KEY"}),r.a.createElement("input",{type:"text",className:"form-control",value:u,onChange:C})),r.a.createElement("div",{className:"form-group"},r.a.createElement(o.a,{tagName:"label",id:"SOURCE_DESC"}),r.a.createElement("input",{type:"text",className:"form-control",value:f,onChange:N})),r.a.createElement("div",{className:"form-group text-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!u.trim()||!y,onClick:S},r.a.createElement("i",{className:"fa fa-plus mr-2"}),r.a.createElement(o.a,{id:"APPEND"})))))))},R=a(24),x=a(84),A=a.n(x),_=function(){var e=Object(O.b)().sources;return r.a.createElement(g.b,null,r.a.createElement(g.c,{align:"center"},r.a.createElement(g.a,{width:{def:12,sm:10,lg:6}},r.a.createElement(R.a,null,e.filter(function(e){return"MY_RECORD"===e.desc}).map(function(e){return r.a.createElement(R.a,{key:"my-record"},r.a.createElement("span",{className:"form-control text-truncate text-center"},e.uid),r.a.createElement("a",{href:"https://social-plugins.line.me/lineit/share?url=".concat(encodeURIComponent("https://tabacotaco.github.io/cash-map/#/cloud/".concat(e.uid)))},r.a.createElement("img",{alt:"icon",className:"img-fluid",src:A.a,style:{width:38}})))})))))};t.default=function(e){var t=e.match.params.syncKey,a=void 0===t?"":t,l=Object(c.useState)("RECORD_SYNC"),i=Object(n.a)(l,2),s=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement("h4",{className:"page-title"},r.a.createElement("i",{className:"mr-2 fa fa-cloud"}),r.a.createElement(o.a,{tagName:"strong",id:"CLOUD_PROCESS"})),r.a.createElement(E,{activeAt:s,onActived:function(e){return u(e)}},r.a.createElement(p,{icon:"fa fa-cloud-download",title:"RECORD_SYNC"},r.a.createElement(P,{syncKey:a})),r.a.createElement(p,{icon:"fa fa-share-square",title:"RECORD_SHARE"},r.a.createElement(_,null))))}}}]);
//# sourceMappingURL=1.3627407c.chunk.js.map