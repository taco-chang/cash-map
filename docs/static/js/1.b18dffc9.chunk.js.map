{"version":3,"sources":["assets/imgs/line_icon.svg","components/bs/type.tab.ts","components/bs/BsTab.tsx","components/editor/SourceDesc.tsx","components/editor/DataSource.tsx","components/CloudSync.tsx","components/CloudShare.tsx","components/CloudProcess.tsx"],"names":["module","exports","ActivedTab","activeAt","el","tabs","this","reduce","res","useState","uuidv4","id","Object","keys","map","props","title","icon","text","active","className","children","BsTitle","onActived","intl","useIntl","doActive","useCallback","type","data-toggle","aria-controls","style","onClick","messages","TabContent","BsTab","actived","titleOpts","key","contentOpts","contentEl","aria-labelledby","SAVE_SYMBOL","Symbol","SourceDescToggle","show","onToggle","onOpenDesc","SourceDesc","desc","onChange","value","setValue","onInputChange","e","target","onModalCallback","btn","doStopSubmit","preventDefault","stopPropagation","useEvents","BsModal","closeByBtn","doCallback","btns","code","BTN","DISMISS","onSubmit","Modal","DataSourceDropdown","showDesc","uid","edit","setEdit","useSource","sourceKey","sources","dispatch","onSwitch","switchTo","action","window","history","back","onDescToggle","source","doUpdate","newDesc","doRemove","BsDropdown","onSelect","Toggle","src","CloudSync","syncKey","syncRef","useRef","newKey","setNewKey","setDesc","allowed","autoFocus","setAllowed","isAppendValid","trim","indexOf","findIndex","$desc","isKeyValid","then","content","useEffect","current","scrollIntoView","onNewkeyChange","onDescChange","doAdd","align","width","def","sm","md","border","b","tagName","DataSource","ref","disabled","CloudShare","lg","filter","href","encodeURIComponent","alt","line_icon","CloudProcess","match","params","setActive"],"mappings":"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","file":"static/js/1.b18dffc9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/line_icon.4fc3c40a.svg\";","import { ReactNode, ReactElement, useState } from 'react';\r\nimport uuidv4 from 'uuid/v4';\r\n\r\n\r\ninterface ITabRegister { [ id: string ]: ReactElement; }\r\n\r\nexport interface ITitleProps {\r\n  id: string;\r\n  text: string;\r\n  icon?: string;\r\n  active: boolean;\r\n  onActived?: (id: string) => void;\r\n}\r\n\r\ninterface IContentProps {\r\n  id: string;\r\n  className?: string;\r\n  children: ReactNode;\r\n  active: boolean;\r\n}\r\n\r\nexport class ActivedTab {\r\n  private tabs: ITabRegister = {};\r\n\r\n  constructor(private activeAt: string, el: ReactElement[]) {\r\n    this.tabs = el.reduce((res: ITabRegister, el) => {\r\n      const [ id ] = useState(uuidv4());\r\n\r\n      return { ...res, [ id ]: el };\r\n    }, {});\r\n  }\r\n\r\n  get titleOpts(): ITitleProps[] {\r\n    return Object.keys(this.tabs).map((id): ITitleProps => {\r\n      const { title, icon } = this.tabs[id].props;\r\n\r\n      return { id, icon, text: title, active: this.activeAt === title };\r\n    });\r\n  }\r\n\r\n  get contentOpts(): IContentProps[] {\r\n    return Object.keys(this.tabs).map((id): IContentProps => {\r\n      const { title, className, children } = this.tabs[id].props;\r\n\r\n      return { id, className, children, active: this.activeAt === title };\r\n    });\r\n  }\r\n}\r\n","import React, { FC, ReactElement, CSSProperties, ReactNode, useCallback } from 'react';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { ActivedTab, ITitleProps } from './type.tab';\r\n\r\n\r\n// TODO: Types\r\ninterface ITabProps {\r\n  children: ReactElement[];\r\n  className?: string;\r\n  activeAt: string;\r\n  style?: CSSProperties;\r\n  onActived?: (id: string) => void;\r\n}\r\n\r\n\r\n// TODO: Components\r\nconst BsTitle: FC<ITitleProps> = ({ id, text, icon = '', active = false, onActived = () => {} }) => {\r\n  const intl = useIntl();\r\n  const doActive = useCallback(() => onActived(text), [ text, onActived ]);\r\n\r\n  return (\r\n    <button type=\"button\" id={ `${ id }-tab` } data-toggle=\"tab\" aria-controls={ id } style={{}}\r\n      className={ `nav-item nav-link ${ active ? 'active' : '' }` } onClick={ doActive }>\r\n\r\n      { !icon ? null : <i className={ `mr-2 ${ icon }` } /> }\r\n      { text in intl.messages ? intl.messages[ text ] : text }\r\n    </button>\r\n  );\r\n};\r\n\r\nexport const TabContent: FC<{\r\n  className?: string;\r\n  title: string;\r\n  icon?: string;\r\n  children: ReactNode;\r\n}> = () => null;\r\n\r\nexport const BsTab: FC<ITabProps> = ({ children, activeAt, style, className = '', onActived = () => {}}) => {\r\n  const actived = new ActivedTab(activeAt, children);\r\n\r\n  return (\r\n    <div className={ `cm-tab ${ className }` } style={ style }>\r\n      <div className=\"nav nav-tabs\">\r\n        { actived.titleOpts.map(({ id, icon, text, active }) =>\r\n          <BsTitle key={ id } {...{ id, icon, text, active, onActived }} />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"tab-content\">\r\n        { actived.contentOpts.map(({ id, className, active, children: contentEl }) => !active ? null : (\r\n          <div key={ id } id={ id } aria-labelledby={ `${ id }-tab` } className={\r\n            `tab-pane fade show active ${ className }`\r\n          }>\r\n            { contentEl }\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC, Dispatch, SetStateAction, FormEvent, ChangeEvent, useCallback, useState } from  'react';\r\n\r\nimport BsModal, { BTN } from '../bs/BsModal';\r\n\r\n\r\n// TODO: Types\r\nconst SAVE_SYMBOL = Symbol('SAVE');\r\n\r\ntype ShowModal = [ boolean, Dispatch<SetStateAction<boolean>> ];\r\n\r\ninterface IEventInput {\r\n  value: string;\r\n  setValue: (value: string) => void;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\ninterface IToggleProps {\r\n  show: ShowModal;\r\n  className?: string;\r\n  icon?: string;\r\n  onToggle?: () => void;\r\n}\r\n\r\ninterface IModalProps {\r\n  show: ShowModal;\r\n  desc: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\n\r\n// TODO: Events\r\nconst useEvents = ({ value, setValue, onChange }: IEventInput) => {\r\n  return {\r\n    onInputChange: useCallback((e: ChangeEvent<HTMLInputElement>) => setValue(e.target.value), [ setValue ]),\r\n\r\n    onModalCallback: useCallback((btn: BTN | symbol) => {\r\n      if (SAVE_SYMBOL === btn)\r\n        onChange(value);\r\n    }, [ value, onChange ]),\r\n    \r\n    doStopSubmit: useCallback((e: FormEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      onChange(value);\r\n    }, [ value, onChange ])\r\n  };\r\n};\r\n\r\n\r\n// TODO: Components\r\nexport const SourceDescToggle: FC<IToggleProps> = ({\r\n  show,\r\n  className = '',\r\n  icon = 'fa fa-pencil-square-o',\r\n  onToggle = () => {}\r\n}) => {\r\n  const onOpenDesc = useCallback(() => {\r\n    show[1](true);\r\n    onToggle();\r\n  }, [ show, onToggle ]);\r\n\r\n  return (\r\n    <button type=\"button\" className={ className } onClick={ onOpenDesc }>\r\n      <i className={ icon } />\r\n    </button>\r\n  );\r\n};\r\n\r\nconst SourceDesc: FC<IModalProps> = ({ show, desc, onChange }) => {\r\n  const [ value, setValue ] = useState(desc);\r\n  const { onInputChange, onModalCallback, doStopSubmit } = useEvents({ value, setValue, onChange });\r\n\r\n  return (\r\n    <BsModal className=\"bg-secondary\" show={ show } closeByBtn doCallback={ onModalCallback } title={{\r\n      icon: 'fa fa-pencil-square-o',\r\n      text: 'TITLE_SET_DESC'\r\n    }} btns={[\r\n      { code: BTN.DISMISS, icon: 'fa fa-ban', text: 'CANCEL' },\r\n      { code: SAVE_SYMBOL, icon: 'fa fa-download', text: 'CONFIRM' }\r\n    ]}>\r\n      <form onSubmit={ doStopSubmit }>\r\n        <input type=\"text\" className=\"form-control\" value={ value } onChange={ onInputChange } />\r\n      </form>\r\n    </BsModal>\r\n  );\r\n};\r\n\r\nconst Modal: FC<IModalProps> = (props) => {\r\n  const { show: [ isShow ]} = props;\r\n\r\n  return !isShow ? null : <SourceDesc {...props} />;\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Dispatch, FC, useState, useCallback, SetStateAction } from 'react';\r\nimport { IAction, ISource, useSource } from '../../services/store/source';\r\n\r\nimport BsDropdown, { BsOption } from '../bs/BsDropdown';\r\nimport SourceDesc, { SourceDescToggle } from './SourceDesc';\r\n\r\n\r\n// TODO: Types\r\ninterface IEventInput {\r\n  edit: ISource;\r\n  setEdit: Dispatch<SetStateAction<ISource>>;\r\n  dispatch: Dispatch<IAction>;\r\n}\r\n\r\n// TODO: Events\r\nconst useEvents = ({ edit, setEdit, dispatch }: IEventInput) => {\r\n  return {\r\n    onSwitch: useCallback((switchTo: string) => {\r\n      dispatch({ action: 'SWITCH', switchTo });\r\n      window.history.back();\r\n    }, [ dispatch ]),\r\n\r\n    onDescToggle: useCallback((source: ISource) => setEdit(source), [ setEdit ]),\r\n\r\n    doUpdate: useCallback((newDesc: string) => dispatch({ action: 'UPDATE', source: edit}), [ edit, dispatch ]),\r\n\r\n    doRemove: useCallback((source: ISource) => dispatch({ action: 'REMOVE', source }), [ dispatch ])\r\n  };\r\n};\r\n\r\nconst DataSourceDropdown: FC = () => {\r\n  const showDesc = useState<boolean>(false);\r\n  const [ edit, setEdit ] = useState({ uid: '', desc: '' });\r\n  const { sourceKey, sources, dispatch } = useSource();\r\n  const { onSwitch, onDescToggle, doUpdate, doRemove } = useEvents({ edit, setEdit, dispatch });\r\n\r\n  return (\r\n    <div>\r\n      <SourceDesc show={ showDesc } desc={ edit.desc } onChange={ doUpdate } />\r\n\r\n      <BsDropdown onSelect={ onSwitch } Toggle={ sources.reduce((desc: string, src) =>\r\n        src.uid === sourceKey ? src.desc : desc, ''\r\n      )}>\r\n        { sources.map(({ uid, desc }) => 'MY_RECORD' === desc ?\r\n          <BsOption key={ uid } value={ uid } desc={ desc } />\r\n        : (\r\n          <BsOption key={ uid } value={ uid } desc={ desc }>\r\n            <SourceDescToggle show={ showDesc } className=\"btn btn-link text-info\" onToggle={ () => onDescToggle({ uid, desc }) } />\r\n\r\n            <button type=\"button\" className=\"btn btn-link text-danger\" onClick={ () => doRemove({ uid, desc }) }>\r\n              <i className=\"fa fa-remove\" />\r\n            </button>\r\n          </BsOption>\r\n        ))}\r\n      </BsDropdown>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DataSourceDropdown;\r\n","import { FormattedMessage as Fmsg } from 'react-intl';\r\n\r\nimport { isKeyValid } from '../services/store/record';\r\nimport { useSource } from '../services/store/source';\r\n\r\nimport { BsContainer, BsRow, BsCol } from './bs/BsGrid';\r\nimport DataSourceDropdown from './editor/DataSource';\r\n\r\nimport React, {\r\n  FC,\r\n  Dispatch,\r\n  SetStateAction,\r\n  MutableRefObject,\r\n  FormEvent,\r\n  ChangeEvent,\r\n  useState,\r\n  useCallback,\r\n  useRef,\r\n  useEffect\r\n} from 'react';\r\n\r\n\r\n// TODO: Types\r\ninterface IEventInput {\r\n  autoFocus  : boolean;\r\n  newKey     : string;\r\n  desc       : string;\r\n  syncRef    : MutableRefObject<null>;\r\n  setNewKey  : Dispatch<SetStateAction<string>>;\r\n  setDesc    : Dispatch<SetStateAction<string>>;\r\n  setAllowed : Dispatch<SetStateAction<boolean>>;\r\n}\r\n\r\n// TODO: Events\r\nconst useEvents = ({ autoFocus, syncRef, newKey, desc, setNewKey, setDesc, setAllowed }: IEventInput) => {\r\n  const { sources, dispatch } = useSource();\r\n\r\n  const isAppendValid = useCallback((key: string = '', desc: string = '') =>\r\n    !!key.trim() && !!desc.trim() && ['.', '#', '$', '[', ']'].indexOf(key) < 0\r\n      && sources.findIndex(({ desc: $desc }) => desc.trim() === $desc.trim()) < 0 ?\r\n        isKeyValid(key).then(({ content }) => setAllowed(content)) : setAllowed(false)\r\n  , [ sources, setAllowed ]);\r\n\r\n  useEffect(() => {\r\n    const { current: el } = syncRef;\r\n\r\n    if (autoFocus && el)\r\n      (el as any).scrollIntoView();\r\n  });\r\n\r\n  return {\r\n    onNewkeyChange: useCallback((e: ChangeEvent<HTMLInputElement>) => {\r\n      setNewKey(e.target.value);\r\n      isAppendValid(e.target.value, desc);\r\n    }, [ desc, setNewKey, isAppendValid ]),\r\n\r\n    onDescChange: useCallback((e: ChangeEvent<HTMLInputElement>) => {\r\n      setDesc(e.target.value);\r\n      isAppendValid(newKey, e.target.value);\r\n    }, [ newKey, setDesc, isAppendValid ]),\r\n\r\n    doStopSubmit: useCallback((e: FormEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }, []),\r\n\r\n    doAdd: useCallback(() => {\r\n      dispatch({ action: 'CREATE', source: { uid: newKey, desc: desc }});\r\n      setNewKey('');\r\n      setDesc('');\r\n    }, [ newKey, desc, setNewKey, setDesc, dispatch ])\r\n  };\r\n};\r\n\r\n// TODO: Component\r\nconst CloudSync: FC<{ syncKey?: string; }> =({ syncKey = '' }) => {\r\n  const syncRef = useRef(null);\r\n  const [ newKey, setNewKey ] = useState(syncKey);\r\n  const [ desc, setDesc ] = useState('');\r\n  const [ allowed, setAllowed ] = useState<boolean>(false);\r\n\r\n  const { onNewkeyChange, onDescChange, doStopSubmit, doAdd } = useEvents({\r\n    autoFocus: !!syncKey,\r\n    syncRef,\r\n    newKey,\r\n    desc,\r\n    setNewKey,\r\n    setDesc,\r\n    setAllowed\r\n  });\r\n\r\n  return (\r\n    <BsContainer>\r\n      <BsRow align=\"center\">\r\n        <BsCol className=\"form-group\" width={{ def: 12, sm: 8, md: 6 }} border={{ b: true }}>\r\n          <h5 className=\"mb-3\">\r\n            <label>\r\n              <i className=\"mr-2 fa fa-exchange\" />\r\n              <Fmsg tagName=\"strong\" id=\"SWITCH_CLOUD\" />\r\n            </label>\r\n          </h5>\r\n\r\n          <p className=\"text-light font-italic font-weight-light mb-4\">\r\n            <Fmsg id=\"SWITCH_DESC\" />\r\n          </p>\r\n\r\n          <div className=\"form-group\">\r\n            <DataSourceDropdown />\r\n          </div>\r\n        </BsCol>\r\n      </BsRow>\r\n\r\n      <BsRow align=\"center\">\r\n        <BsCol width={{ def: 12, sm: 8, md: 6 }}>\r\n          <h5 ref={ syncRef } className=\"mb-3\">\r\n            <i className=\"mr-2 fa fa-plus-square\" />\r\n            <Fmsg tagName=\"strong\" id=\"APPEND_SOURCE\" />\r\n          </h5>\r\n\r\n          <p className=\"text-light font-italic font-weight-light mb-4\">\r\n            <Fmsg id=\"APPEND_DESC\" />\r\n          </p>\r\n\r\n          <form onSubmit={ doStopSubmit }>\r\n            <div className=\"form-group\">\r\n              <Fmsg tagName=\"label\" id=\"SOURCE_KEY\" />\r\n              <input type=\"text\" className=\"form-control\" value={ newKey } onChange={ onNewkeyChange } />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <Fmsg tagName=\"label\" id=\"SOURCE_DESC\" />\r\n              <input type=\"text\" className=\"form-control\" value={ desc } onChange={ onDescChange } />\r\n            </div>\r\n\r\n            <div className=\"form-group text-right\">\r\n              <button type=\"submit\" className=\"btn btn-primary\" disabled={ !newKey.trim() || !allowed } onClick={ doAdd }>\r\n                <i className=\"fa fa-plus mr-2\" />\r\n\r\n                <Fmsg id=\"APPEND\" />\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </BsCol>\r\n      </BsRow>\r\n    </BsContainer>\r\n  );\r\n};\r\n\r\nexport default CloudSync;\r\n","import React, { FC } from 'react';\r\n\r\nimport { useSource } from '../services/store/source';\r\n\r\nimport { BsContainer, BsRow, BsCol } from './bs/BsGrid';\r\nimport { BsInlineGroup } from './bs/BsForm';\r\n\r\nimport line_icon from '../assets/imgs/line_icon.svg';\r\n\r\n\r\nconst CloudShare: FC = () => {\r\n  const { sources } = useSource();\r\n\r\n  return (\r\n    <BsContainer>\r\n      <BsRow align=\"center\">\r\n        <BsCol width={{ def: 12, sm: 10, lg: 6 }}>\r\n          <BsInlineGroup>\r\n            { sources.filter(({ desc }) => 'MY_RECORD' === desc).map(source =>\r\n              <BsInlineGroup key=\"my-record\">\r\n                <span className=\"form-control text-truncate text-center\">{ source.uid }</span>\r\n\r\n                <a href={ `https://social-plugins.line.me/lineit/share?url=${ encodeURIComponent(\r\n                  `https://tabacotaco.github.io/cash-map/#/cloud/${ source.uid }`\r\n                )}` }>\r\n                  <img alt=\"icon\" className=\"img-fluid\" src={ line_icon } style={{ width: 38 }} />\r\n                </a>\r\n              </BsInlineGroup>\r\n            )}\r\n          </BsInlineGroup>\r\n        </BsCol>\r\n      </BsRow>\r\n    </BsContainer>\r\n  );\r\n};\r\n\r\nexport default CloudShare;\r\n","import React, { FC, useState } from 'react';\r\nimport { FormattedMessage as Fmsg } from 'react-intl';\r\nimport { match } from 'react-router-dom';\r\n\r\nimport { BsTab, TabContent } from './bs/BsTab';\r\nimport CloudSync from './CloudSync';\r\nimport CloudShare from './CloudShare';\r\n\r\n\r\nconst CloudProcess: FC<{ match: match<{ syncKey?: string; }>; }> = ({ match: { params: { syncKey = '' }}}) => {\r\n  const [ active, setActive ] = useState('RECORD_SYNC');\r\n\r\n  return (\r\n    <div>\r\n      <h4 className=\"page-title\">\r\n        <i className=\"mr-2 fa fa-cloud\" />\r\n        <Fmsg tagName=\"strong\" id=\"CLOUD_PROCESS\" />\r\n      </h4>\r\n\r\n      <BsTab activeAt={ active } onActived={ title => setActive(title) }>\r\n        <TabContent icon=\"fa fa-cloud-download\" title=\"RECORD_SYNC\">\r\n          <CloudSync syncKey={ syncKey } />\r\n        </TabContent>\r\n\r\n        <TabContent icon=\"fa fa-share-square\" title=\"RECORD_SHARE\">\r\n          <CloudShare />\r\n        </TabContent>\r\n      </BsTab>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CloudProcess;\r\n"],"sourceRoot":""}