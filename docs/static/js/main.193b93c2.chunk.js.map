{"version":3,"sources":["services/loading.tsx","services/message.tsx","components/bs/BsForm.tsx","components/editor/RecordGroup.tsx","services/store/source/storage.ts","services/store/source/reducer.ts","services/store/source/index.tsx","components/bs/BsDropdown.tsx","@types/bs.types.ts","components/bs/BsModal.tsx","components/bs/type.grid.ts","components/bs/BsGrid.tsx","components/editor/CycleDropdown.tsx","components/editor/TypeDropdown.tsx","assets/imgs/404.svg","assets/imgs/cash-logo.svg","assets/i18n lazy /^/.*/.json$/ groupOptions: {} namespace object","services/i18n.tsx","components/toolbar/SumDashboard.tsx","components/toolbar/AmountSlidebar.tsx","components/toolbar/GroupCollapse.tsx","components/App.tsx","services/router.tsx","components/toolbar/MainHeader.tsx","serviceWorker.ts","index.tsx","services/store/record/firebase.ts","services/store/record/reducer.ts","services/store/record/type.ts","services/store/record/index.tsx"],"names":["useLoading","useContext","Context","createContext","isLoading","Loading","LoadingMask","children","useState","show","callbackFn","useEffect","Function","Provider","value","className","BTN","STORE_DISPATCH","Symbol","useMessage","messageStore","state","options","btns","type","text","code","CONFIRM","icon","CANCEL","clearTimeout","timeout","handler","setMessage","dispatch","uid","uuidv4","undefined","window","setTimeout","Message","MessageBox","useReducer","storeDispatch","$do","onClickMask","$","modal","remove","useCallback","e","target","parents","length","preventDefault","stopPropagation","useEvents","id","onClick","toLowerCase","title","tagName","content","map","btn","key","autoFocus","BsInlineGroup","label","labelWidth","join","style","width","SAVE_SYMBOL","RecordGroupToggle","onToggle","onOpenGroup","RecordGroup","alloweds","group","onChange","setValue","groups","useRecord","onFilterChange","onSelectGroup","onModalCallback","doLoadGroupsOnOpen","action","doStopSubmit","closeByBtn","DISMISS","onShowBsModal","doCallback","onSubmit","onSelect","Toggle","filter","$group","indexOf","Modal","props","setSources","list","localStorage","setItem","JSON","stringify","get","getItem","getKey","desc","parse","create","source","update","data","setKey","SourceReducer","switchTo","current","Error","reduce","$uid","useSource","SourceContext","sourceKey","sources","SourceStore","setSourceKey","BsOption","disabled","intl","useIntl","onSelectOption","onPressEnter","useOptionEvents","onKeyPress","messages","BsDropdown","bgColor","color","Array","isArray","useDropdownEvents","data-toggle","opt","modalReducer","setShow","BsModal","isShow","setModal","is","$el","onClickFbar","data-backdrop","data-keyboard","data-dismiss","aria-label","aria-hidden","description","COLUMN","getColumnOptions","fn","opts","Object","def","keys","forEach","size","getSpacingClass","kind","cls","bssize","push","getBootstrapClass","start","end","on","$value","toClassString","i","arr","getColClass","offset","order","option","WIDTH","OFFSET","ORDER","getBsClasses","display","margin","padding","border","rounded","colors","hidden","isMgSpacing","prop","isPdSpacing","getBorderClass","getRoundedClass","getColorClass","hiddenOn","breakpoint","splice","getDisplayClass","BsContainer","createElement","BsRow","gutters","alignable","align","BsCol","CycleDropdown","disableOnce","CYCLE_ONCE","CYCLE_DAY","CYCLE_MONTH","CYCLE_YEAR","TypeDropdown","disableDeposit","INCOME","EXPENSES","DEPOSIT","module","exports","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","ids","t","LANG","defintl","locale","default","reducer","EN","res","ZH","navigator","language","substring","catch","setLang","I18n","setMessages","promise","hasMessages","msg","useMemo","DEFAULT","SumDashboard","summary","cycle","onCycleChange","expanded","setExpanded","doCollapse","SUMMARY","toUpperCase","sm","Numeral","income","format","expenses","deposit","APPLICABLE","applicable","AmountSlidebar","record","showGroup","onSlide","turnon","params","status","doUpdateGroup","fail","message","success","doRemove","to","amount","min","max","GroupCollapse","groupName","actualCount","sum","getSummary","ignore","doSlideAll","count","y","md","UNGROUP","lg","b","step","App","setFilter","summaryCycle","loaded","setLoaded","doClear","APPEND_RECORD","ALL_OPTION","CLEAR","Loadable","loader","loading","Route","component","setState","this","Component","router","path","exact","goBack","history","back","src","error404","alt","asEnglish","asChinese","MainHeader","dropdown","useRef","Logo","ref","Boolean","location","hostname","match","ReactDOM","render","routers","document","getElementById","serviceWorker","ready","registration","unregister","Database","Firebase","FIREBASE_OPTIONS","database","getRef","getSpecificSum","sumcycle","daysInMonth","Moment","Date","daysInYear","getFullYear","dayOfYear","Math","floor","getAvgAmount","snapshot","exists","reject","child","val","param","emptyFn","toGroup","sort","g1","g2","doReload","FirebaseRecord","StateStore","$list","toList","DispatchStore","$params","DATE_FROMAT","RecordModel","validFm","validTo","$desc","$type","$status","$cycle","$validFm","$validTo","$amount","showID","toDate","toString","amt","parseFloat","isNaN","DEFAULT_STATE","isKeyValid","RecordContext","RecordStore","store","$dispatch"],"mappings":"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","file":"static/js/main.193b93c2.chunk.js","sourcesContent":["import React, {\r\n  FC,\r\n  ReactNode,\r\n  Dispatch,\r\n  SetStateAction,\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect\r\n} from 'react';\r\n\r\n\r\n// TODO: Types\r\ninterface IState { show: boolean; callbackFn?: () => void; }\r\ninterface IContext { isLoading: boolean; Loading: Dispatch<SetStateAction<IState>> }\r\n\r\n// TODO: Variables\r\nconst useLoading = () => useContext(Context);\r\n\r\n// TODO: Components\r\nconst Context = createContext<IContext>({ isLoading: false, Loading: () => {} });\r\n\r\nconst LoadingMask: FC<{ children?: ReactNode }> = ({ children }) => {\r\n  const [{ show: isLoading, callbackFn }, Loading ] = useState<IState>({ show: false });\r\n\r\n  useEffect(() => {\r\n    if (callbackFn instanceof Function)\r\n      callbackFn();\r\n  }, [ callbackFn ]);\r\n\r\n  return (\r\n    <Context.Provider value={{ isLoading, Loading }}>\r\n      { !isLoading ? null : (\r\n        <div className=\"loading-mask\" />\r\n      )}\r\n\r\n      { children }\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport default LoadingMask;\r\nexport { useLoading };\r\n","import { FormattedMessage as Fmsg } from 'react-intl';\r\nimport uuidv4 from 'uuid/v4';\r\n\r\nimport React, {\r\n  FC,\r\n  Dispatch,\r\n  Reducer,\r\n  ReactNode,\r\n  MouseEvent,\r\n  createContext,\r\n  useEffect,\r\n  useContext,\r\n  useReducer,\r\n  useCallback\r\n} from 'react';\r\n\r\n\r\n// TODO: Types\r\nconst STORE_DISPATCH = Symbol('DISPATCH');\r\n\r\nexport enum BTN { CONFIRM, CANCEL }\r\n\r\ninterface IStoreState { options?: IMessageState; }\r\n\r\ninterface IContext {\r\n  options?: IMessageOptions;\r\n  Message: Dispatch<IMessageOptions | BTN>;\r\n  [ STORE_DISPATCH ]: Dispatch<IMessageOptions | BTN>;\r\n}\r\n\r\ninterface IMessageOptions {\r\n  type: 'INFO' | 'WARNING' | 'DANGER' | 'CONFIRM';\r\n  uid?: string;\r\n  title?: string;\r\n  icon?: string;\r\n  content: string;\r\n  timeout?: number;\r\n  handler?: (btn: BTN) => any;\r\n}\r\n\r\ninterface IMessageState extends IMessageOptions {\r\n  btns: {\r\n    text?: string;\r\n    code: BTN;\r\n    icon?: string;\r\n  }[];\r\n}\r\n\r\n// TODO: Hooks\r\nconst useMessage = () => useContext(Context);\r\n\r\nconst useEvents = (options?: IMessageState) => {\r\n  useEffect(() => {\r\n    if (options)\r\n      $(`#${ options.uid }`).modal('show');\r\n    else\r\n      $('div.modal-backdrop').remove();\r\n  }, [ options ]);\r\n\r\n  return {\r\n    onClickMask: useCallback((e: MouseEvent) => {\r\n      if ($(e.target).parents('div.alert').length > 0) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n    }, [])\r\n  };\r\n};\r\n\r\n// TODO: Reducer\r\nconst messageStore: Reducer<IStoreState, IMessageOptions | BTN> = (state, options) => {\r\n  switch (typeof options) {\r\n    case 'object': return {\r\n      options: {\r\n        ...options,\r\n        btns: 'CONFIRM' !== options.type ? [\r\n          { text: 'CHECK_IT', code: BTN.CONFIRM, icon: 'fa fa-check' }\r\n        ] : [\r\n          { text: 'CANCEL', code: BTN.CANCEL, icon: 'fa fa-ban' },\r\n          { text: 'CONFIRM', code: BTN.CONFIRM, icon: 'fa fa-check' }\r\n        ]\r\n      }\r\n    };\r\n    case 'number':\r\n      if (state.options) {\r\n        clearTimeout(state.options.timeout);\r\n\r\n        if (state.options.handler instanceof Function) state.options.handler(\r\n          options\r\n        );\r\n      }\r\n      return {};\r\n  }\r\n  return state;\r\n};\r\n\r\nconst setMessage: Reducer<Dispatch<IMessageOptions | BTN>, IMessageOptions | BTN> = (dispatch, options) => {\r\n  switch (typeof options) {\r\n    case 'number':\r\n      dispatch(options);\r\n      break;\r\n\r\n    case 'object':\r\n      const { type, timeout = null } = options;\r\n\r\n      dispatch({\r\n        ...options,\r\n        uid     : uuidv4(),\r\n        timeout : 'CONFIRM' === type ? undefined : window.setTimeout(\r\n          () => dispatch(BTN.CANCEL),\r\n          !timeout ? 2000 : timeout\r\n        )\r\n      });\r\n      break;\r\n  }\r\n  return dispatch;\r\n};\r\n\r\n// TODO: Components\r\nconst Context = createContext<IContext>({\r\n  Message: () => {},\r\n  [ STORE_DISPATCH ]: () => {}\r\n});\r\n\r\nconst MessageBox: FC<{ children?: ReactNode }> = ({ children }) => {\r\n  const [{ options }, storeDispatch ] = useReducer(messageStore, {});\r\n  const $do = useReducer(setMessage, storeDispatch);\r\n  const { onClickMask } = useEvents(options);\r\n\r\n  return (\r\n    <Context.Provider value={{ options, Message: $do[1], [ STORE_DISPATCH ]: storeDispatch }}>\r\n      { children }\r\n\r\n      { !options ? null : (\r\n        <div className=\"modal message-modal\" id={ options.uid } onClick={ onClickMask }>\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className={ `alert alert-${ 'CONFIRM' === options.type ? 'primary' : options.type.toLowerCase() }` }>\r\n                <div className=\"media\">\r\n                  { !options.icon ? null : <i className={ `mr-3 ${options.icon}` } /> }\r\n\r\n                  <div className=\"media-body\">\r\n                    { !options.title ? null : (\r\n                      <h5 className=\"mt-0\">\r\n                        <Fmsg tagName=\"strong\" id={ options.title } />\r\n                      </h5>\r\n                    ) }\r\n\r\n                    <Fmsg tagName=\"p\" id={ options.content } />\r\n\r\n                    <div className=\"d-flex justify-content-end\">\r\n                      { options.btns.map(btn => (\r\n                        <button key={ `btn-${ btn.code }` } type=\"button\" autoFocus={ BTN.CANCEL === btn.code }\r\n                          onClick={ () => $do[1](btn.code) } className={ `ml-1 btn btn-${ BTN.CANCEL === btn.code ? 'secondary'\r\n                              : 'CONFIRM' === options.type ? 'primary'\r\n                                : options.type.toLowerCase()\r\n                          }`}>\r\n\r\n                          { !btn.icon ? null : <i className={ `mr-2 ${btn.icon}` } /> }\r\n                          { !btn.text ? null : <Fmsg id={ btn.text } /> }\r\n                        </button>\r\n                      )) }\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport default MessageBox;\r\nexport { useMessage };\r\n","import React, { FC, ReactNode } from 'react';\r\nimport { MessageFormatElement } from 'intl-messageformat-parser';\r\n\r\ninterface IInlineGroupProps {\r\n  label?: string | MessageFormatElement[];\r\n  labelWidth?: number | string;\r\n  className?: string;\r\n  children?: ReactNode;\r\n}\r\n\r\nexport const BsInlineGroup: FC<IInlineGroupProps> = ({ label = '', labelWidth = 'auto', className = '', children }) => {\r\n  return (\r\n    <div className={[ 'input-group', className ].join(' ')}>\r\n      { !label ? null : (\r\n        <div className=\"input-group-prepend\">\r\n          <div className=\"input-group-text justify-content-end\" style={{ width: labelWidth }}>{ label }</div>\r\n        </div>\r\n      )}\r\n\r\n      { children }\r\n    </div>\r\n  );\r\n};\r\n","import React, {\r\n  FC,\r\n  Dispatch,\r\n  FormEvent,\r\n  ChangeEvent,\r\n  SetStateAction,\r\n  useState,\r\n  useCallback\r\n} from 'react';\r\n\r\nimport { useRecord } from '../../services/store/record';\r\n\r\nimport BsModal, { BTN } from '../bs/BsModal';\r\nimport BsDropdown, { BsOption } from '../bs/BsDropdown';\r\n\r\n\r\n// TODO: Types\r\nconst SAVE_SYMBOL = Symbol('SAVE');\r\n\r\nexport type ShowModal = [ boolean, Dispatch<SetStateAction<boolean>> ];\r\n\r\ninterface IEventInput {\r\n  group: string;\r\n  setValue: (value: string) => void;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\ninterface IToggleProps {\r\n  show: ShowModal;\r\n  className?: string;\r\n  icon?: string;\r\n  onToggle?: () => void;\r\n}\r\n\r\ninterface IModalProps {\r\n  show: ShowModal;\r\n  group: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\n// TODO: Events\r\nconst useEvents = ({ group, setValue, onChange }: IEventInput) => {\r\n  const { dispatch } = useRecord();\r\n\r\n  return {\r\n    onFilterChange: useCallback(({ target: { value }}: ChangeEvent<HTMLInputElement>) => {\r\n      setValue(value);\r\n    }, [ setValue ]),\r\n\r\n    onSelectGroup: useCallback((value: any) => setValue(value as string), [ setValue ]),\r\n\r\n    onModalCallback: useCallback((btn: BTN | symbol) => {\r\n      if (SAVE_SYMBOL === btn)\r\n        onChange(group);\r\n    }, [ group, onChange ]),\r\n\r\n    doLoadGroupsOnOpen: useCallback(() => dispatch({ action: 'GROUP' }), [ dispatch ]),\r\n    \r\n    doStopSubmit: useCallback((e: FormEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      onChange(group);\r\n    }, [ group, onChange ])\r\n  };\r\n};\r\n\r\n// TODO: Components\r\nexport const RecordGroupToggle: FC<IToggleProps> = ({\r\n  show,\r\n  className = '',\r\n  icon = 'fa fa-object-ungroup',\r\n  onToggle = () => {}\r\n}) => {\r\n  const onOpenGroup = useCallback(() => {\r\n    show[1](true);\r\n    onToggle();\r\n  }, [ show, onToggle ]);\r\n\r\n  return (\r\n    <button type=\"button\" className={ className } onClick={ onOpenGroup }>\r\n      <i className={ icon } />\r\n    </button>\r\n  );\r\n};\r\n\r\nconst RecordGroup: FC<IModalProps> = ({ show, group, onChange }) => {\r\n  const [ value, setValue ] = useState(group);\r\n  const { group: groups } = useRecord();\r\n\r\n  const {\r\n    onFilterChange,\r\n    onSelectGroup,\r\n    onModalCallback,\r\n    doLoadGroupsOnOpen,\r\n    doStopSubmit\r\n  } = useEvents({ group: value, setValue, onChange });\r\n\r\n  return (\r\n    <BsModal className=\"bg-secondary\" show={ show } closeByBtn title={{\r\n      icon: 'fa fa-object-ungroup',\r\n      text: 'TITLE_SET_GROUP'\r\n    }} btns={[\r\n      { code: BTN.DISMISS, icon: 'fa fa-ban', text: 'CANCEL' },\r\n      { code: SAVE_SYMBOL, icon: 'fa fa-download', text: 'CONFIRM' }\r\n    ]} onShowBsModal={ doLoadGroupsOnOpen } doCallback={ onModalCallback }>\r\n      <form onSubmit={ doStopSubmit }>\r\n        <BsDropdown onSelect={ onSelectGroup } Toggle={\r\n          <input type=\"text\" className=\"form-control\" value={ value } onChange={ onFilterChange } />\r\n        }>\r\n          {(alloweds => alloweds.length === 0 ?\r\n            <BsOption value={ value } /> : alloweds.map($group =>\r\n              <BsOption key={ $group } value={ $group } />\r\n            )\r\n          )(groups.filter($group => $group.indexOf(value) >= 0))}\r\n        </BsDropdown>\r\n      </form>\r\n    </BsModal>\r\n  );\r\n};\r\n\r\nconst Modal: FC<IModalProps> = (props) => {\r\n  const { show: [ isShow ]} = props;\r\n\r\n  return !isShow ? null : <RecordGroup {...props} />;\r\n};\r\n\r\nexport default Modal;\r\n","import uuidv4 from 'uuid/v4';\r\nimport { ISource } from './type';\r\n\r\n\r\nconst STORAGE_KEY = 'CASH_MAP_KEY';\r\n\r\nconst setSources = (list: ISource[]) => {\r\n  localStorage.setItem('FIREBASE_KEY', JSON.stringify(list));\r\n\r\n  return get();\r\n};\r\n\r\n// TODO: Export Functions\r\nexport const get = (): ISource[] => {\r\n  if (!localStorage.getItem('FIREBASE_KEY')) setSources([{\r\n    uid  : getKey(),\r\n    desc : 'MY_RECORD'\r\n  }]);\r\n\r\n  return JSON.parse(localStorage.getItem('FIREBASE_KEY') || '[]');\r\n};\r\n\r\nexport const create = (source: ISource) => setSources([ ...get(), source ]);\r\n\r\nexport const update = (source: ISource) => setSources(get().map(data => data.uid === source.uid ? source : data));\r\n\r\nexport const remove = (source: ISource) => setSources(get().filter(data => data.uid !== source.uid));\r\n\r\nexport const setKey = (key: string) => {\r\n  localStorage.setItem(STORAGE_KEY, key);\r\n\r\n  return key;\r\n};\r\n\r\nexport const getKey = () => {\r\n  if (!localStorage.getItem(STORAGE_KEY))\r\n    localStorage.setItem(STORAGE_KEY, uuidv4());\r\n\r\n  return localStorage.getItem(STORAGE_KEY) || '';\r\n};\r\n","import { Reducer } from 'react';\r\nimport { get, create, update, remove, setKey } from './storage';\r\n\r\nimport { IState, IAction } from './type';\r\n\r\nexport const SourceReducer: Reducer<IState, IAction> = (state, { action, source, switchTo }) => {\r\n  const { current, list } = state;\r\n\r\n  switch (action) {\r\n    case 'LIST'   : return { current, list: get()};\r\n    case 'SWITCH' :\r\n      if (!switchTo) throw new Error(\r\n        'If you wanna switch the data source, please input the key at \"switchTo\".'\r\n      );\r\n      return { current: setKey(switchTo || '') || '', list };\r\n\r\n    default:\r\n      if (!source) throw new Error(\r\n        'If you wanna override data, the source can\\'t be empty.'\r\n      );\r\n      \r\n      switch (action) {\r\n        case 'CREATE' : return { list: create(source), current: setKey(source.uid) };\r\n        case 'UPDATE' : return { current, list: update(source) };\r\n        case 'REMOVE' : return {\r\n          list    : remove(source),\r\n          current : source.uid !== current ? current : list.reduce(($uid: string, { uid, desc }) =>\r\n            'MY_RECORD' === desc ? uid : $uid, ''\r\n          )\r\n        };\r\n      }\r\n  }\r\n  return state;\r\n}","import React, { ReactNode, FC, createContext, useState, useReducer, useContext, useEffect } from 'react';\r\n\r\nimport { getKey, get } from './storage';\r\nimport { SourceReducer } from './reducer';\r\nimport { IAction, ISource, ISourceContext } from './type';\r\n\r\n\r\nexport const useSource = () => useContext(SourceContext);\r\nexport type IAction = IAction;\r\nexport type ISource = ISource;\r\n\r\nconst SourceContext = createContext<ISourceContext>({\r\n  sourceKey : getKey(),\r\n  sources   : [],\r\n  dispatch  : () => {}\r\n});\r\n\r\nconst SourceStore: FC<{ children: ReactNode; }> = ({ children }) => {\r\n  const [ sourceKey, setSourceKey ] = useState(getKey());\r\n  const [{ current, list }, dispatch ] = useReducer(SourceReducer, { current: getKey(), list: get()});\r\n\r\n  useEffect(() => {\r\n    if (sourceKey !== current)\r\n      setSourceKey(current);\r\n  }, [ sourceKey, current, setSourceKey ]);\r\n\r\n  return sourceKey !== current ? null : (\r\n    <SourceContext.Provider value={{ sourceKey: current, sources: list, dispatch }}>\r\n      { children }\r\n    </SourceContext.Provider>\r\n  );\r\n};\r\n\r\nexport default SourceStore;\r\n","import React, { FC, KeyboardEvent, ReactElement, ReactNode, useCallback } from 'react';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { BsInlineGroup } from './BsForm';\r\nimport { BsColor, getTextColor } from '../../@types/bs.types';\r\n\r\n\r\n// TODO: Types\r\ninterface IDropdownEventInput {\r\n  onSelect: (value: any) => void;\r\n}\r\n\r\ninterface IOptionEventInput extends IDropdownEventInput {\r\n  value: any;\r\n  disabled: boolean;\r\n}\r\n\r\ninterface IOptionProps {\r\n  className?: string;\r\n  value: any;\r\n  icon?: string;\r\n  desc?: string;\r\n  disabled?: boolean;\r\n  children?: ReactNode;\r\n  onSelect?: (value: any) => void;\r\n}\r\n\r\ninterface IDropdownProps {\r\n  Toggle: ReactElement | string;\r\n  children?: ReactElement | ReactElement[];\r\n  color?: BsColor;\r\n  onSelect?: (value: any) => void;\r\n}\r\n\r\n// TODO: Events\r\nconst useOptionEvents = ({ value, disabled, onSelect }: IOptionEventInput) => {\r\n  return {\r\n    onSelectOption: useCallback(() => disabled ? null : onSelect(value), [ value, disabled, onSelect ]),\r\n\r\n    onPressEnter: useCallback(({ key }: KeyboardEvent) => 'Enter' !== key ? null : onSelect(value), [ value, onSelect ])\r\n  };\r\n};\r\n\r\nconst useDropdownEvents = ({ onSelect }: IDropdownEventInput) => {\r\n  return {\r\n    onSelectOption: useCallback((value: any) => onSelect(value), [ onSelect ])\r\n  }\r\n};\r\n\r\n// TODO: Components\r\nexport const BsOption: FC<IOptionProps> = ({\r\n  className = '',\r\n  value,\r\n  icon,\r\n  desc = value,\r\n  disabled = false,\r\n  children,\r\n  onSelect = () => {}\r\n}) => {\r\n  const intl = useIntl();\r\n  const { onSelectOption, onPressEnter } = useOptionEvents({ value, disabled, onSelect });\r\n\r\n  return (\r\n    <BsInlineGroup>\r\n      <button type=\"button\" disabled={ disabled } className={ `dropdown-item form-control ${ className }` }\r\n        onClick={ onSelectOption } onKeyPress={ onPressEnter }>\r\n\r\n        { !icon ? null : (<i className={ `${ icon } mr-2` } />)}\r\n        { desc in intl.messages ? intl.messages[ desc ] : desc }\r\n      </button>\r\n\r\n      { children }\r\n    </BsInlineGroup>\r\n  );\r\n};\r\n\r\nconst BsDropdown: FC<IDropdownProps> = ({ Toggle, children = [], color = 'light', onSelect = () => {}}) => {\r\n  const intl = useIntl();\r\n  const options = Array.isArray(children) ? children : [ children ];\r\n  const { onSelectOption } = useDropdownEvents({ onSelect });\r\n\r\n  return (\r\n    <div className=\"dropdown\">\r\n      { 'string' !== typeof Toggle ? (\r\n        <Toggle.type {...{ ...Toggle.props, className: `${ Toggle.props.className || '' } dropdown-toggle` }} data-toggle=\"dropdown\" />\r\n      ) : (\r\n        <button type=\"button\" className={ `btn btn-${ color } dropdown-toggle w-100 text-left` } data-toggle=\"dropdown\">\r\n          { Toggle in intl.messages ? intl.messages[ Toggle ] : Toggle }\r\n        </button>\r\n      )}\r\n\r\n      <div className={ `dropdown-menu w-100 bg-${ color } text-${ getTextColor(color) }` }>\r\n        { options.length === 0 ? <BsOption disabled value=\"OPTION_NOT_FOUND\" /> : options.map(opt =>\r\n          <BsOption key={ opt.key } {...{\r\n            ...opt.props,\r\n            onSelect: onSelectOption\r\n          }}  />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BsDropdown;\r\n","\r\nexport type BsColor = 'primary' | 'secondary' | 'success' | 'danger'\r\n| 'warning' | 'info' | 'light' | 'dark' | 'white';\r\n\r\nexport const getTextColor = (bgColor: BsColor): BsColor =>\r\n  [ 'warning', 'light', 'white' ].indexOf(bgColor) >= 0 ? 'dark' : 'white';\r\n","import React, {\r\n  FC,\r\n  ReactNode,\r\n  Reducer,\r\n  Dispatch,\r\n  SetStateAction,\r\n  MouseEvent,\r\n  useCallback,\r\n  useReducer,\r\n  useEffect\r\n} from 'react';\r\n\r\nimport { FormattedMessage as Fmsg } from 'react-intl';\r\nimport uuidv4 from 'uuid/v4';\r\n\r\n\r\n// TODO: Types\r\nexport enum BTN { DISMISS, CALLBACK }\r\n\r\ninterface IModalAction { show: boolean; onShowBsModal?: () => void; }\r\ninterface IModalState { id: string; setShow: Dispatch<SetStateAction<boolean>>; }\r\n\r\ninterface IEventInput {\r\n  id: string;\r\n  isShow: boolean;\r\n  closeByBtn: boolean;\r\n  setModal: Dispatch<IModalAction>;\r\n  onShowBsModal?: () => void;\r\n  doCallback: (btn: BTN | symbol) => void | 'close';\r\n}\r\n\r\ninterface IProps {\r\n  className?: string;\r\n  closeByBtn?: boolean;\r\n  title?: string | { icon: string; text: string; };\r\n  children: ReactNode;\r\n  show: [ boolean, Dispatch<SetStateAction<boolean>> ],\r\n  doCallback?: (btn: BTN | symbol) => void | 'close';\r\n  onShowBsModal?: () => void;\r\n  btns?: {\r\n    text?: string;\r\n    code: BTN | symbol;\r\n    icon?: string;\r\n    color?: 'primary' | 'info' | 'success' | 'warning' | 'danger' | 'white' | 'light' | 'secondary' | 'dark';\r\n  }[];\r\n}\r\n\r\n// TODO: Events & Reducer\r\nconst useEvents = ({ id, isShow, setModal, closeByBtn, onShowBsModal, doCallback }: IEventInput) => {\r\n  useEffect(() => {\r\n    if (!$(`#${ id }`).is(':hidden') !== isShow)\r\n      setModal({ show: isShow, onShowBsModal });\r\n  }, [ id, isShow, setModal, onShowBsModal ]);\r\n\r\n  return {\r\n    onClickMask: useCallback((e: MouseEvent) => {\r\n      const $el = $(e.target);\r\n\r\n      if ((!closeByBtn && $el.parents('div.modal-content').length === 0)\r\n      || $el.is('button.modal-btn') || $el.parents('button.modal-btn').length > 0) {\r\n        setModal({ show: false });\r\n        doCallback(BTN.DISMISS);\r\n      }\r\n    }, [ setModal, closeByBtn, doCallback ]),\r\n\r\n    onClickFbar: useCallback((btn: BTN | symbol) => {\r\n      if ('close' === doCallback(btn) || BTN.DISMISS === btn)\r\n        setModal({ show: false });\r\n    }, [ setModal, doCallback ])\r\n  };\r\n};\r\n\r\nconst modalReducer: Reducer<IModalState, IModalAction> = (state, { show, onShowBsModal }) => {\r\n  const { id, setShow } = state;\r\n\r\n  $(`#${ id }`).modal(show ? 'show' : 'hide');\r\n  setShow(show);\r\n\r\n  if (show && onShowBsModal instanceof Function)\r\n    onShowBsModal();\r\n\r\n  return state;\r\n};\r\n\r\n// TODO: Components\r\nconst BsModal: FC<IProps> = ({\r\n  className = '',\r\n  closeByBtn = false,\r\n  title = '',\r\n  btns = [],\r\n  show: [ isShow, setShow ],\r\n  children,\r\n  onShowBsModal = () => {},\r\n  doCallback = () => { return 'close'; }\r\n}) => {\r\n  const [{ id }, setModal ] = useReducer(modalReducer, { id: uuidv4(), setShow });\r\n  const { onClickMask, onClickFbar } = useEvents({ id, isShow, setModal, closeByBtn, onShowBsModal, doCallback });\r\n\r\n  return !isShow ? null : (\r\n    <div className=\"modal\" id={ id } onClick={ onClickMask } data-backdrop={ closeByBtn ? 'static' : true } data-keyboard={ !closeByBtn }>\r\n      <div className=\"modal-dialog\">\r\n        <div className={ `modal-content ${ className } px-2` }>\r\n          { !title ? null : (({ text, icon = '' }: { text: string; icon?: string; }) =>\r\n            <div className=\"modal-header py-3\">\r\n              <h5 className=\"modal-title\">\r\n                { !icon ? null : (<i className={ `${ icon } mr-2` } />)}\r\n\r\n                <Fmsg tagName=\"strong\" id={ text } />\r\n              </h5>\r\n\r\n              <button type=\"button\" className=\"close text-white modal-btn\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n          )('string' === typeof title ? { text: title } : title)}\r\n\r\n          <div className=\"modal-body py-2\">{ children }</div>\r\n\r\n          { btns.length === 0 ? null : (\r\n            <div className=\"modal-footer pt-2\">\r\n              { btns.map(({ text = '', icon = '', color = '', code }) => (\r\n                <button type=\"button\" key={ 'symbol' === typeof code ? code.description : code } onClick={\r\n                  () => onClickFbar(code)\r\n                } className={\r\n                  `modal-btn btn btn-${ color ? color : BTN.DISMISS === code ? 'secondary' : 'primary' }`\r\n                }>\r\n                  { !icon ? null : <i className={ `${icon} mr-2` } /> }\r\n                  { !text ? null : <Fmsg id={ text } /> }\r\n                </button>\r\n              )) }\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BsModal;\r\n","import { ReactNode } from 'react';\r\nimport { BsColor } from '../../@types/bs.types';\r\n\r\n\r\n// TODO: Basic Types\r\ntype Breakpoint = 'sm' | 'md' | 'lg' | 'xl';\r\n\r\ntype BsSize = '' | Breakpoint;\r\ntype BsBreakpoint = 'def' | Breakpoint;\r\ntype BsSpacing5 = 1 | 2 | 3 | 4 | 5;\r\n\r\ntype BsDisplay = 'inline' | 'inline-block' | 'inline-flex'\r\n  | 'block' | 'flex' | 'table' | 'table-row' | 'table-cell';\r\n\r\n\r\n// TODO: Configures Types\r\nenum COLUMN { WIDTH, OFFSET, ORDER }\r\n\r\ntype BsCol12 = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\r\ntype Width = 'auto' | BsCol12;\r\ntype Order = 'first' | 'last' | BsCol12;\r\n\r\ntype BsColors = false | { border?: BsColor; text?: BsColor; bg?: BsColor; };\r\ntype BsHidden = false | BsBreakpoint | BsBreakpoint[];\r\ntype BsBorder = boolean | { t?: true;  l?: true; b?: true;  r?: true; };\r\ntype BsRounded = boolean | { size?: 'sm' | 'lg'; type?: 'top' | 'bottom' | 'left' | 'right' | 'circle' | 'pill'; };\r\n\r\ntype BsMargin = false | BsSpacing5 | {\r\n  t?: BsSpacing5;  l?: BsSpacing5 | 'auto';\r\n  b?: BsSpacing5;  r?: BsSpacing5 | 'auto';\r\n  y?: BsSpacing5;  x?: BsSpacing5 | 'auto';\r\n};\r\n\r\ntype BsPadding = false | BsSpacing5 | {\r\n  t?: BsSpacing5;  l?: BsSpacing5;\r\n  b?: BsSpacing5;  r?: BsSpacing5;\r\n  y?: BsSpacing5;  x?: BsSpacing5;\r\n};\r\n\r\ninterface IBreakpoint<T> { def?: T; sm?: false | T; md?: false | T; lg?: false | T; xl?: false | T; }\r\n\r\nexport interface IRowProps extends IBsgridProps {\r\n  align?: false | 'start' | 'center' | 'end' | 'around' | 'between';\r\n  alignable?: BsSize;\r\n  gutters?: boolean;\r\n}\r\n\r\nexport interface IColProps extends IBsgridProps {\r\n  width?: Width | IBreakpoint<Width>;\r\n  offset?: false | BsCol12 | IBreakpoint<BsCol12>;\r\n  order?: false | Order | IBreakpoint<Order>;\r\n}\r\n\r\n\r\n// TODO: Generate Class Function\r\nfunction getColumnOptions<T>(options: T | false, fn: (bssize: BsSize, opts: T) => void): void {\r\n  const opts: IBreakpoint<T> = (options instanceof Object ? options : { def: options }) as IBreakpoint<T>;\r\n\r\n  Object.keys(opts).forEach((size: string) => (opts as any)[size] === false ? null : fn(\r\n    ('def' === size ? '' : size) as BsSize,\r\n    (opts as any)[size]\r\n  ));\r\n}\r\n\r\nfunction getSpacingClass(kind: 'm' | 'p', options: any): string[] {\r\n  const cls: string[] = [];\r\n\r\n  Object.keys(options).forEach((size: string) => {\r\n    const bssize = 'def' === size ? '' : size;\r\n    const value = options[size];\r\n\r\n    if (value !== false) {\r\n      if ('number' === typeof value)\r\n        cls.push(getBootstrapClass(bssize as BsSize, { start: kind, end: value }));\r\n      else Object.keys(value).forEach((on: string) => {\r\n        const $value = value[on] || '';\r\n\r\n        if ($value)\r\n          cls.push(getBootstrapClass(bssize as BsSize, { start: `${kind}${on}`, end: $value }));\r\n      });\r\n    }\r\n  });\r\n  return cls;\r\n}\r\n\r\nfunction getBorderClass(options: BsBorder): string[] {\r\n  const cls: string[] = [];\r\n\r\n  if (options !== false) {\r\n    if (options === true)\r\n      cls.push('border');\r\n    else Object.keys(options).forEach((on: string) => {\r\n      switch (on) {\r\n        case 't': cls.push('border-top'); break;\r\n        case 'b': cls.push('border-bottom'); break;\r\n        case 'l': cls.push('border-left'); break;\r\n        case 'r': cls.push('border-right'); break;\r\n      }\r\n    });\r\n  }\r\n  return cls;\r\n}\r\n\r\nfunction getRoundedClass(options: BsRounded): string[] {\r\n  const cls: string[] = [];\r\n\r\n  if (options !== false) {\r\n    if (options === true)\r\n      cls.push('rounded');\r\n    else Object.keys(options).forEach((prop: string) => {\r\n      const { [prop]: value } = options as any;\r\n\r\n      if (value)\r\n        cls.push(`rounded-${value}`);\r\n    });\r\n  }\r\n  return cls;\r\n}\r\n\r\nfunction getColorClass(options: BsColors): string[] {\r\n  const cls: string[] = [];\r\n\r\n  if (options !== false) Object.keys(options).forEach((target: string) => {\r\n    const { [target]: value } = options as any;\r\n\r\n    if (value)\r\n      cls.push('border' === target ? `border-${value}` : `${target}-${value}`);\r\n  });\r\n  return cls;\r\n}\r\n\r\nfunction getDisplayClass(display: BsDisplay, options: BsHidden): string[] {\r\n  const cls: string[] = [`d-${display}`];\r\n\r\n  if (options !== false) {\r\n    const hiddenOn: BsBreakpoint[] = Array.isArray(options) ? options : [options];\r\n\r\n    ['def', 'sm', 'md', 'lg', 'xl'].filter((breakpoint: string) =>\r\n      hiddenOn.indexOf(breakpoint as BsBreakpoint) >= 0\r\n    ).forEach((breakpoint: string) => {\r\n      const size: BsSize = 'def' === breakpoint ? '' : (breakpoint as BsSize);\r\n\r\n      cls.splice(cls.indexOf(getBootstrapClass(size, { start: 'd', end: display })), 1);\r\n      cls.push(getBootstrapClass(size, { start: 'd', end: 'none' }));\r\n    });\r\n  }\r\n  return cls;\r\n}\r\n\r\nexport function getBootstrapClass(\r\n  size: BsSize,\r\n  { start = '', end = '' }: { start?: string | number, end?: string | number } = {}\r\n): string {\r\n  return [start, size, end].filter((value: string | number) => !(!value)).join('-');\r\n};\r\n\r\nexport function toClassString(cls: string[]): string {\r\n  return cls.filter((value: string, i: number, arr: string[]) =>\r\n    !(!value) && arr.indexOf(value) === i\r\n  ).join(' ');\r\n}\r\n\r\nexport function getColClass({ width = 'auto', offset = false, order = false }: IColProps): string[] {\r\n  return [ width, offset, order ].reduce((cls: string[], option: any, i: number): string[] => {\r\n    switch (i) {\r\n      case COLUMN.WIDTH: getColumnOptions<Width>(option, (size, opts) =>\r\n        cls.push(getBootstrapClass(size, { start: 'col', end: 'auto' === opts ? '' : opts }))\r\n      ); break;\r\n      case COLUMN.OFFSET: getColumnOptions<BsCol12>(option, (size, opts) =>\r\n        cls.push(getBootstrapClass(size, { start: 'offset', end: opts }))\r\n      ); break;\r\n      case COLUMN.ORDER: getColumnOptions<Order>(option, (size, opts) =>\r\n      cls.push(getBootstrapClass(size, { start: 'order', end: opts }))\r\n    ); break;\r\n    }\r\n    return [ ...cls ];\r\n  }, []);\r\n}\r\n\r\nexport function getBsClasses(display: BsDisplay, {\r\n  className = '',\r\n  margin = false,\r\n  padding = false,\r\n  border = false,\r\n  rounded = false,\r\n  colors = false,\r\n  hidden = false\r\n}: IBsgridProps): string[] {\r\n  const isMgSpacing = Object.keys(margin).filter(prop => [ 'def', 'sm', 'md', 'lg', 'xl' ].indexOf(prop) >= 0).length > 0;\r\n  const isPdSpacing = Object.keys(padding).filter(prop => [ 'def', 'sm', 'md', 'lg', 'xl' ].indexOf(prop) >= 0).length > 0;\r\n\r\n  return [\r\n    className,\r\n    ...getSpacingClass('m', !isMgSpacing ? { def: margin } : margin),\r\n    ...getSpacingClass('p', !isPdSpacing ? { def: padding } : padding),\r\n    ...getBorderClass(border),\r\n    ...getRoundedClass(rounded),\r\n    ...getColorClass(colors),\r\n    ...getDisplayClass(display, hidden)\r\n  ];\r\n};\r\n\r\nexport default interface IBsgridProps {\r\n  tagName?: string;\r\n  className?: string;\r\n\r\n  margin?: BsMargin | IBreakpoint<BsMargin>;\r\n  padding?: BsPadding | IBreakpoint<BsPadding>;\r\n  border?: BsBorder;\r\n  rounded?: BsRounded;\r\n  colors?: BsColors;\r\n  hidden?: BsHidden;\r\n\r\n  children?: ReactNode;\r\n}","import { FC, createElement } from 'react';\r\n\r\nimport IBsgridProps, {\r\n  IRowProps,\r\n  IColProps,\r\n  toClassString,\r\n  getBsClasses,\r\n  getColClass,\r\n  getBootstrapClass\r\n} from './type.grid';\r\n\r\n\r\n// TODO: Components\r\nexport const BsContainer: FC<IBsgridProps> = (props: IBsgridProps) => {\r\n  const { tagName = 'div', children } = props;\r\n\r\n  return createElement(tagName, {\r\n    className: toClassString([ 'container', ...getBsClasses('block', props) ])\r\n  }, children);\r\n};\r\n\r\nexport const BsRow: FC<IRowProps> = (props: IRowProps) => {\r\n  const { tagName = 'div', children, gutters = true, alignable = '', align = false } = props;\r\n\r\n  return createElement(tagName, {\r\n    className: toClassString([\r\n      'row',\r\n      gutters ? '' : 'no-gutters',\r\n      align === false ? '' : `justify-content-${getBootstrapClass(alignable, { end: align })}`,\r\n      ...getBsClasses('flex', props)\r\n    ])\r\n  }, children);\r\n};\r\n\r\nexport const BsCol: FC<IColProps> = (props: IColProps) => {\r\n  const { tagName = 'div', children } = props;\r\n\r\n  return createElement(tagName, {\r\n    className: toClassString([\r\n      'col',\r\n      ...getColClass(props),\r\n      ...getBsClasses('block', props)\r\n    ])\r\n  }, children);\r\n}\r\n","import React, { FC } from 'react';\r\nimport { useIntl } from 'react-intl';\r\n\r\n// TODO: Types\r\ninterface IProps {\r\n  className?: string;\r\n  disableOnce?: boolean;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\n// TODO: Components\r\nconst CycleDropdown: FC<IProps> = ({ value, onChange, className = '', disableOnce = false }) => {\r\n  const intl = useIntl();\r\n\r\n  return (\r\n    <select className={ `form-control ${ className }`} value={ value } onChange={\r\n      ({ target }) => onChange(target.value)\r\n    }>\r\n      { disableOnce ? null : (\r\n        <option value=\"once\">{ intl.messages.CYCLE_ONCE }</option>\r\n      )}\r\n      <option value=\"day\">{ intl.messages.CYCLE_DAY }</option>\r\n      <option value=\"month\">{ intl.messages.CYCLE_MONTH }</option>\r\n      <option value=\"year\">{ intl.messages.CYCLE_YEAR }</option>\r\n    </select>\r\n  );\r\n};\r\n\r\nexport default CycleDropdown;","import React, { FC, ReactNode } from 'react';\r\nimport { useIntl } from 'react-intl';\r\n\r\n\r\n// TODO: Types\r\ninterface IProps {\r\n  children?: ReactNode;\r\n  className?: string;\r\n  disableDeposit?: boolean;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\n// TODO: Components\r\nconst TypeDropdown: FC<IProps> = ({\r\n  className = '',\r\n  disableDeposit = false,\r\n  children,\r\n  value,\r\n  onChange\r\n}) => {\r\n  const intl = useIntl();\r\n\r\n  return (\r\n    <select className={ `form-control ${ className }`} value={ value } onChange={\r\n      ({ target }) => onChange(target.value)\r\n    }>\r\n      { children }\r\n      <option value=\"income\">{ intl.messages.INCOME }</option>\r\n      <option value=\"expenses\">{ intl.messages.EXPENSES }</option>\r\n\r\n      { disableDeposit ? null : (\r\n        <option value=\"deposit\">{ intl.messages.DEPOSIT }</option>\r\n      )}\r\n    </select>\r\n  );\r\n};\r\n\r\nexport default TypeDropdown;\r\n","module.exports = __webpack_public_path__ + \"static/media/404.bd332713.svg\";","module.exports = __webpack_public_path__ + \"static/media/cash-logo.cb5cc733.svg\";","var map = {\n\t\"./en.json\": [\n\t\t81,\n\t\t2\n\t],\n\t\"./zh.json\": [\n\t\t82,\n\t\t3\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 63;\nmodule.exports = webpackAsyncContext;","import React, {\r\n  FC,\r\n  Reducer,\r\n  Dispatch,\r\n  ReactNode,\r\n  createContext,\r\n  useState,\r\n  useReducer,\r\n  useMemo,\r\n  useContext\r\n} from 'react';\r\n\r\nimport { IntlProvider } from 'react-intl';\r\n\r\n\r\n// TODO: Types\r\nexport enum LANG { DEFAULT, EN, ZH }\r\n\r\ninterface IMessages { [message: string]: string; }\r\n\r\ninterface IMsgOptions { locale: string; messages: IMessages; }\r\n\r\ninterface IImportJSON { default: IMessages; }\r\n\r\ninterface IContext { locale: string; setLang: Dispatch<LANG> }\r\n\r\n\r\n// TODO: Variables & Reducer\r\nconst defintl = import('../assets/i18n/en.json').then(({ default: messages }: IImportJSON): IMsgOptions => ({\r\n  locale: 'en',\r\n  messages\r\n}));\r\n\r\nconst useI18n = () => useContext(Context);\r\n\r\nconst reducer: Reducer<Promise<IMsgOptions>, LANG> = (state, action: LANG) => {\r\n  switch (action) {\r\n    case LANG.EN: return defintl.then(res => {\r\n      localStorage.setItem('CASH_MAP_LANG', 'en');\r\n\r\n      return res;\r\n    });\r\n    case LANG.ZH: return import('../assets/i18n/zh.json').then(({ default: messages }: IImportJSON): IMsgOptions => {\r\n      localStorage.setItem('CASH_MAP_LANG', 'zh');\r\n\r\n      return { locale: 'zh', messages };\r\n    });\r\n    default: return ((locale: string) => {\r\n      locale = locale.substring(0, locale.indexOf('-') > 0 ? locale.indexOf('-') : undefined);\r\n\r\n      return import(`../assets/i18n/${locale}.json`).then(({ default: messages }: IImportJSON): IMsgOptions => {\r\n        localStorage.setItem('CASH_MAP_LANG', locale);\r\n\r\n        return { locale, messages };\r\n      }).catch(() => defintl);\r\n    })(localStorage.getItem('CASH_MAP_LANG') || navigator.language.toLowerCase());\r\n  }\r\n};\r\n\r\n\r\n// TODO: Components\r\nconst Context = createContext<IContext>({ locale: 'en', setLang: () => {} });\r\n\r\nconst I18n: FC<{ children: ReactNode; }> = ({ children }) => {\r\n  const [{ locale, messages }, setMessages ] = useState<IMsgOptions>({ locale: 'en', messages: {} });\r\n  const [ promise, setLang ] = useReducer(reducer, defintl);\r\n  const hasMessages = Object.keys(messages).length > 0;\r\n\r\n  promise.then(msg => JSON.stringify(msg) === JSON.stringify(messages) ? null : setMessages(msg));\r\n\r\n  useMemo(() => hasMessages ? null : setLang(LANG.DEFAULT), [ hasMessages ]);\r\n\r\n  return !hasMessages ? null : (\r\n    <IntlProvider {...{ locale, messages }}>\r\n      <Context.Provider value={{ locale, setLang }}>\r\n        { children }\r\n      </Context.Provider>\r\n    </IntlProvider>\r\n  );\r\n}\r\n\r\nexport default I18n;\r\n\r\nexport {\r\n  useI18n\r\n}\r\n","import React, { FC, useState, useCallback } from 'react';\r\nimport { FormattedMessage as Fmsg, useIntl } from 'react-intl';\r\nimport Numeral from 'numeral';\r\n\r\nimport { Cycle, ISummary } from '../../services/store/record';\r\n\r\nimport { BsContainer, BsRow, BsCol } from '../bs/BsGrid';\r\nimport { BsInlineGroup } from '../bs/BsForm';\r\n\r\nimport CycleDropdown from '../editor/CycleDropdown';\r\n\r\n\r\n// TODO: Component\r\nconst SumDashboard: FC<{\r\n  summary: ISummary;\r\n  cycle: Cycle;\r\n  onCycleChange: (value: Cycle) => void\r\n}> = ({ summary, cycle, onCycleChange }) => {\r\n  const intl = useIntl();\r\n  const labelWidth = 'zh' === intl.locale ? 60 : 110;\r\n  const [ expanded, setExpanded ] = useState<boolean>(false);\r\n  const doCollapse = useCallback(() => setExpanded(!expanded), [ expanded, setExpanded ]);\r\n\r\n  return (\r\n    <fieldset className={ `summary-dashboard shadow ${ expanded ? 'sd-expand' : 'sd-collapse' }` }>\r\n      <legend>\r\n        <button type=\"button\" className=\"btn btn-link\" onClick={ doCollapse }>\r\n          <i className={ `mr-2 fa fa-${ expanded ? 'minus' : 'plus' }-square-o` } />\r\n          { intl.messages.SUMMARY } ({ intl.messages[ `CYCLE_${ cycle.toUpperCase() }` ] })\r\n        </button>\r\n      </legend>\r\n\r\n      { !expanded ? (\r\n        <BsContainer tagName=\"form\">\r\n          <BsRow className=\"text-right\">\r\n            <BsCol className=\"form-group\">\r\n              <Fmsg tagName=\"label\" id=\"APPLICABLE\" />\r\n              <span className=\"d-block\">$ { Numeral(summary.applicable).format('0,0') }</span>\r\n            </BsCol>\r\n\r\n            <BsCol className=\"form-group\">\r\n              <Fmsg tagName=\"label\" id=\"DEPOSIT\" />\r\n              <span className=\"d-block\">$ { Numeral(summary.deposit).format('0,0') }</span>\r\n            </BsCol>\r\n          </BsRow>\r\n        </BsContainer>\r\n      ) : (\r\n        <BsContainer tagName=\"form\">\r\n          <BsRow>\r\n            <BsCol className=\"form-group\" width={{ sm: 6 }}>\r\n              <Fmsg tagName=\"label\" id=\"VIEW_CYCLE\" />\r\n\r\n              <CycleDropdown value={ cycle } disableOnce onChange={\r\n                value => onCycleChange(value as 'day' | 'month' | 'year')\r\n              } />\r\n            </BsCol>\r\n          </BsRow>\r\n\r\n          <BsRow>\r\n            <BsCol width={{ def: 12, sm: 6 }}>\r\n              <BsInlineGroup label={ intl.messages.INCOME } labelWidth={ labelWidth }>\r\n                <span className=\"form-control text-right\">$ { Numeral(summary.income).format('0,0') }</span>\r\n              </BsInlineGroup>\r\n            </BsCol>\r\n\r\n            <BsCol width={{ def: 12, sm: 6 }}>\r\n              <BsInlineGroup label={ intl.messages.EXPENSES } labelWidth={ labelWidth }>\r\n                <span className=\"form-control text-right\">$ { Numeral(summary.expenses).format('0,0') }</span>\r\n              </BsInlineGroup>\r\n            </BsCol>\r\n\r\n            <BsCol width={{ def: 12, sm: 6 }}>\r\n              <BsInlineGroup label={ intl.messages.DEPOSIT } labelWidth={ labelWidth }>\r\n                <span className=\"form-control text-right\">$ { Numeral(summary.deposit).format('0,0') }</span>\r\n              </BsInlineGroup>\r\n            </BsCol>\r\n\r\n            <BsCol width={{ def: 12, sm: 6 }}>\r\n              <BsInlineGroup label={ intl.messages.APPLICABLE } labelWidth={ labelWidth }>\r\n                <span className=\"form-control text-right\">$ { Numeral(summary.applicable).format('0,0') }</span>\r\n              </BsInlineGroup>\r\n            </BsCol>\r\n          </BsRow>\r\n        </BsContainer>\r\n      )}\r\n    </fieldset>\r\n  );\r\n};\r\n\r\nexport default SumDashboard;\r\n","import React, { FC, useCallback, useState } from 'react';\r\nimport { useIntl } from 'react-intl';\r\nimport { Link } from 'react-router-dom';\r\nimport Numeral from 'numeral';\r\n\r\nimport { useLoading } from '../../services/loading';\r\nimport { BTN, useMessage } from '../../services/message';\r\nimport { IRecordData, useRecord } from '../../services/store/record';\r\n\r\nimport RecordGroup, { RecordGroupToggle } from '../editor/RecordGroup';\r\n\r\n\r\n// TODO: Types\r\ninterface IEventInput {\r\n  record: IRecordData;\r\n}\r\n\r\n// TODO: Events\r\nconst useEvents = ({ record }: IEventInput) => {\r\n  const { isLoading, Loading } = useLoading();\r\n  const { Message } = useMessage();\r\n  const { dispatch } = useRecord();\r\n\r\n  return {\r\n    onSlide: useCallback((turnon: boolean) => dispatch({\r\n      action: 'UPDATE',\r\n      params: { ...record, status: turnon ? 'actual' : 'expected' }\r\n    }), [ record, dispatch ]),\r\n\r\n    doUpdateGroup: useCallback((value: string) => isLoading ? null : Loading({\r\n      show: true,\r\n      callbackFn: () => dispatch({\r\n        action: 'UPDATE',\r\n        params: { ...record, group: value || '' },\r\n        fail: (e: Error) => Loading({\r\n          show: false,\r\n          callbackFn: () => Message({ type: 'DANGER', content: e.message })\r\n        }),\r\n        success: () => Loading({\r\n          show: false,\r\n          callbackFn: () => Message({ type: 'INFO', content: 'MSG_SAVE_SUCCESS' })\r\n        })\r\n      })\r\n    }), [ Loading, Message, dispatch, isLoading, record ]),\r\n\r\n    doRemove: useCallback(() => Message({\r\n      type    : 'CONFIRM',\r\n      title   : 'MSG_CONFIRM_TITLE',\r\n      icon    : 'fa fa-question',\r\n      content : 'MSG_REMOVE_QUESTION',\r\n      handler : btn => BTN.CONFIRM !== btn ? null : Loading({\r\n        show: true,\r\n        callbackFn: () => dispatch({\r\n          action: 'REMOVE',\r\n          params: record,\r\n          fail: (e: Error) => Loading({\r\n            show: false,\r\n            callbackFn: () => Message({ type: 'DANGER', content: e.message })\r\n          }),\r\n          success: () => Loading({\r\n            show: false,\r\n            callbackFn: () => Message({ type: 'INFO', content: 'MSG_REMOVE_SUCCESS' })\r\n          })\r\n        })\r\n      })\r\n    }), [ Loading, Message, dispatch, record ])\r\n  };\r\n}\r\n\r\n// TODO: Components\r\nconst AmountSlidebar: FC<{ record: IRecordData; }> = ({ record }) => {\r\n  const intl = useIntl();\r\n  const showGroup = useState<boolean>(false);\r\n  const { onSlide, doUpdateGroup, doRemove } = useEvents({ record });\r\n\r\n  return (\r\n    <div className=\"form-group amount-slidebar\">\r\n      <RecordGroup show={ showGroup } group={ record.group || '' } onChange={ doUpdateGroup } />\r\n\r\n      <div className=\"media\">\r\n        <div className=\"btn-group-vertical\">\r\n          <Link className=\"mr-3 btn btn-link text-info\" to={ `/update/${ record.uid }` }>\r\n            <i className=\"fa fa-pencil-square-o\" />\r\n          </Link>\r\n\r\n          <RecordGroupToggle show={ showGroup } className=\"btn btn-link text-warning\" />\r\n        </div>\r\n        \r\n        <span className=\"media-body py-2\">\r\n          <h4>{ record.desc }</h4>\r\n          $ { Numeral(record.amount).format('0,0') } / { intl.messages[`CYCLE_${ (record.cycle || '').toUpperCase() }`] }\r\n        </span>\r\n\r\n        <button type=\"button\" className=\"btn btn-link text-white mt-2\" onClick={ doRemove }>\r\n          <i className=\"fa fa-trash-o\" />\r\n        </button>\r\n      </div>\r\n\r\n      <input type=\"range\" className={ `custom-range ${ record.type  }` } min=\"0\" max=\"1\"\r\n        value={ 'actual' === record.status ? 1 : 0 } onChange={({ target: { value }}) => onSlide(value === '1')} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AmountSlidebar;\r\n","import React, { FC, useState, useCallback, Dispatch, SetStateAction } from 'react';\r\nimport { FormattedMessage as Fmsg, useIntl } from 'react-intl';\r\nimport Numeral from 'numeral';\r\n\r\nimport { useLoading } from '../../services/loading';\r\nimport { useMessage } from '../../services/message';\r\nimport { useRecord, IRecordData, ISummary, getSummary } from '../../services/store/record';\r\n\r\nimport { BsContainer, BsRow, BsCol } from '../bs/BsGrid';\r\n\r\nimport RecordGroup, { RecordGroupToggle } from '../editor/RecordGroup';\r\nimport AmountSlidebar from './AmountSlidebar';\r\n\r\n\r\n// TODO: Types\r\ninterface IEventInput {\r\n  list: IRecordData[];\r\n  expanded: [ boolean, Dispatch<SetStateAction<boolean>> ];\r\n}\r\n\r\ninterface IGroupProps {\r\n  cycle: 'day' | 'month' | 'year';\r\n  groupName?: string;\r\n  list: IRecordData[];\r\n}\r\n\r\n// TODO: Events\r\nconst useEvents = ({ list, expanded: [ expanded, setExpanded ] }: IEventInput) => {\r\n  const { isLoading, Loading } = useLoading();\r\n  const { Message } = useMessage();\r\n  const { dispatch } = useRecord();\r\n\r\n  return {\r\n    doCollapse: useCallback(() => setExpanded(!expanded), [ expanded, setExpanded ]),\r\n\r\n    doSlideAll: useCallback((turnon: boolean) => list.forEach(record => dispatch({\r\n      action: 'UPDATE',\r\n      params: { ...record, status: turnon ? 'actual' : 'expected' }\r\n    })), [ list, dispatch ]),\r\n\r\n    doUpdateGroup: useCallback((value: string) => isLoading ? null : Loading({\r\n      show: true,\r\n      callbackFn: () => {\r\n        let count = 0;\r\n\r\n        list.forEach(record => dispatch({\r\n          action: 'UPDATE',\r\n          params: { ...record, group: value },\r\n          fail: (e: Error) => Loading({\r\n            show: false,\r\n            callbackFn: () => Message({ type: 'DANGER', content: e.message })\r\n          }),\r\n          success: () => Loading({\r\n            show: false,\r\n            callbackFn: () => {\r\n              count++;\r\n\r\n              if (count === list.length) Message({\r\n                type: 'INFO',\r\n                content: 'MSG_SAVE_SUCCESS'\r\n              });\r\n            }\r\n          })\r\n        }));\r\n      }\r\n    }), [ Message, Loading, isLoading, dispatch, list ])\r\n  };\r\n};\r\n\r\n// TODO: Component\r\nconst GroupCollapse: FC<IGroupProps> = ({ cycle, groupName = 'UNGROUP', list }) => {\r\n  const actualCount = list.filter(({ status }) => 'actual' === status).length;\r\n  const status = actualCount === list.length ? 1 : actualCount === 0 ? 0 : .5;\r\n  const intl = useIntl();\r\n  const showGroup = useState<boolean>(false);\r\n  const expanded = useState<boolean>(true);\r\n  const sum = getSummary({ cycle, list, ignore: true }) as ISummary;\r\n  const { doCollapse, doSlideAll, doUpdateGroup } = useEvents({ list, expanded });\r\n\r\n  return (\r\n    <BsContainer margin={{ y: 3 }}>\r\n      <RecordGroup show={ showGroup } group={ 'UNGROUP' === groupName ? '' : groupName } onChange={ doUpdateGroup } />\r\n\r\n      <BsRow>\r\n        <BsCol tagName=\"fieldset\" className=\"group-title\" width={{ sm: 8, md: 6 }}\r\n          border={{ t: true }} colors={{ border: 'warning' }}>\r\n\r\n          <legend>\r\n            { 'UNGROUP' === groupName ? <span className=\"p-2 text-warning\">{ intl.messages.UNGROUP }</span> :\r\n              <button type=\"button\" className=\"btn btn-link text-warning\" onClick={ doCollapse }>\r\n                <i className={ `mr-2 fa fa-${ expanded[0] ? 'minus' : 'plus' }-square-o` } />\r\n                { groupName }\r\n              </button>\r\n            }\r\n\r\n            { 'UNGROUP' === groupName ? null : (\r\n              <RecordGroupToggle show={ showGroup } icon=\"fa fa-pencil-square\" className=\"btn btn-link text-info\" />\r\n            )}\r\n          </legend>\r\n        </BsCol>\r\n      </BsRow>\r\n\r\n      { !expanded[0] ?\r\n        (<BsRow align=\"center\">\r\n          <BsCol width={{ def: 12, sm: 10, lg: 8 }} margin={{ t: 3, b: 1 }}>\r\n            <table className=\"table table-dark table-striped table-hover text-right\">\r\n              <thead>\r\n                <tr>\r\n                  <Fmsg tagName=\"th\" id=\"INCOME\" />\r\n                  <Fmsg tagName=\"th\" id=\"EXPENSES\" />\r\n                  <Fmsg tagName=\"th\" id=\"DEPOSIT\" />\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                <tr>\r\n                  <td>{ Numeral(sum.income).format('0,0') }</td>\r\n                  <td>{ Numeral(sum.expenses).format('0,0') }</td>\r\n                  <td>{ Numeral(sum.deposit).format('0,0') }</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n\r\n            <input type=\"range\" className=\"custom-range group\" min=\"0\" max=\"1\"\r\n              step={ actualCount > 0 && actualCount < list.length ? .5 : 1 }\r\n              value={ status } onChange={({ target: { value }}) => doSlideAll(value === '1')} />\r\n          </BsCol>\r\n        </BsRow>) :\r\n        \r\n        list.map((record, i) => <BsRow key={`record-${ record.uid }`} align=\"center\">\r\n          <BsCol width={{ def: 12, sm: 10, lg: 8 }} margin={{ t: 3, b: 1 }} border={\r\n            i === (list.length - 1) ? false : { b: true }\r\n          }>\r\n            <AmountSlidebar record={ record } />\r\n          </BsCol>\r\n        </BsRow>\r\n      )}\r\n    </BsContainer>\r\n  );\r\n};\r\n\r\nexport default GroupCollapse;\r\n","import React, { Dispatch, SetStateAction, FC, useState, useCallback, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { FormattedMessage as Fmsg, useIntl } from 'react-intl';\r\n\r\nimport { useLoading } from '../services/loading';\r\nimport { BTN, useMessage } from '../services/message';\r\nimport { useRecord } from '../services/store/record';\r\n\r\nimport { BsContainer, BsRow, BsCol } from './bs/BsGrid';\r\nimport { BsInlineGroup } from './bs/BsForm';\r\n\r\nimport SumDashboard from './toolbar/SumDashboard';\r\nimport GroupCollapse from './toolbar/GroupCollapse';\r\n\r\nimport TypeDropdown from './editor/TypeDropdown';\r\n\r\n\r\n// TODO: Types\r\ninterface IEventInput {\r\n  summaryCycle: 'day' | 'month' | 'year';\r\n  setFilter: Dispatch<SetStateAction<string>>;\r\n}\r\n\r\n// TODO: Events\r\nconst useEvents = ({ summaryCycle, setFilter }: IEventInput) => {\r\n  const [ loaded, setLoaded ] = useState<boolean>(false);\r\n  const { Loading } = useLoading();\r\n  const { Message } = useMessage();\r\n  const { dispatch } = useRecord();\r\n\r\n  useEffect(() => {\r\n    if (!loaded) Loading({\r\n      show: true,\r\n      callbackFn: () => dispatch({\r\n        action: 'SUMMARY',\r\n        params: { cycle: summaryCycle },\r\n        fail: (e: Error) => Loading({\r\n          show: false,\r\n          callbackFn: () => Message({ type: 'DANGER', content: e.message })\r\n        }),\r\n        success: () => dispatch({\r\n          action: 'LIST',\r\n          fail: (e: Error) => Loading({\r\n            show: false,\r\n            callbackFn: () => Message({ type: 'DANGER', content: e.message })\r\n          }),\r\n          success: () => Loading({\r\n            show: false,\r\n            callbackFn: () => setLoaded(true)\r\n          })\r\n        })\r\n      })\r\n    });\r\n  }, [ Loading, Message, summaryCycle, loaded, setLoaded, dispatch ]);\r\n\r\n  return {\r\n    onCycleChange: useCallback((value: 'day' | 'month' | 'year') => dispatch({\r\n      action: 'SUMMARY',\r\n      params: { cycle: value }\r\n    }), [ dispatch ]),\r\n    \r\n    onFilterChange: useCallback((value: string) => {\r\n      setFilter(value);\r\n      dispatch({ action: 'LIST', params: { type: 'all' === value ? '' : value }})\r\n    }, [ dispatch, setFilter ]),\r\n\r\n    doClear: useCallback(() => Message({\r\n      type    : 'CONFIRM',\r\n      title   : 'MSG_CONFIRM_TITLE',\r\n      icon    : 'fa fa-question',\r\n      content : 'MSG_CLEAR_QUESTION',\r\n      handler : btn => BTN.CONFIRM !== btn ? null : Loading({\r\n        show: true,\r\n        callbackFn: () => dispatch({\r\n          action: 'CLEAR',\r\n          fail: (e: Error) => Loading({\r\n            show: false,\r\n            callbackFn: () => Message({ type: 'DANGER', content: e.message })\r\n          }),\r\n          success: () => Loading({\r\n            show: false,\r\n            callbackFn: () => Message({ type: 'INFO', content: 'MSG_REMOVE_SUCCESS' })\r\n          })\r\n        })\r\n      })\r\n    }), [ Loading, Message, dispatch ])\r\n  }\r\n};\r\n\r\n// TODO: Component - APP\r\nconst App: FC = () => {\r\n  const intl = useIntl();\r\n  const [ filter, setFilter ] = useState('all');\r\n  const { summary, list } = useRecord();\r\n  const { onCycleChange, onFilterChange, doClear } = useEvents({ summaryCycle: summary.cycle, setFilter });\r\n\r\n  return (\r\n    <div>\r\n      <SumDashboard summary={ summary } cycle={ summary.cycle } onCycleChange={ onCycleChange } />\r\n\r\n      { Object.keys(list).map(group =>\r\n        <GroupCollapse key={ group } cycle={ summary.cycle } groupName={ group } list={ list[group] } />\r\n      )}\r\n\r\n      <BsContainer className=\"list-fbar\">\r\n        <BsRow padding={{ t: 3 }}>\r\n          <BsCol className=\"form-group\">\r\n            <Fmsg tagName=\"label\" id=\"FILTER_MAINTAIN\" />\r\n\r\n            <BsInlineGroup>\r\n              <Link className=\"btn btn-primary\" to=\"/append\">\r\n                <i className=\"fa fa-plus mr-2\" /> { intl.messages.APPEND_RECORD }\r\n              </Link>\r\n\r\n              <TypeDropdown className=\"rounded mx-2\" value={ filter } onChange={ onFilterChange }>\r\n                <option value=\"all\">{ intl.messages.ALL_OPTION }</option>\r\n              </TypeDropdown>\r\n\r\n              <button type=\"button\" className=\"btn btn-danger\" onClick={ doClear }>\r\n                <i className=\"fa fa-remove mr-2\" /> { intl.messages.CLEAR }\r\n              </button>\r\n            </BsInlineGroup>\r\n          </BsCol>\r\n        </BsRow>\r\n      </BsContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React, { Component, FC, useEffect, useCallback } from 'react';\r\nimport { FormattedMessage as Fmsg } from 'react-intl';\r\nimport { RouteProps, RouteComponentProps } from 'react-router-dom';\r\n\r\nimport { useLoading } from './loading';\r\n\r\nimport { BsContainer, BsRow, BsCol } from '../components/bs/BsGrid';\r\nimport App from '../components/App';\r\n\r\nimport error404 from '../assets/imgs/404.svg';\r\n\r\n\r\n// TODO: Types\r\ninterface ILoadable {\r\n  loading?: FC;\r\n  loader: () => Promise<{\r\n    default: FC<RouteComponentProps<any>>;\r\n  }>;\r\n}\r\n\r\ninterface IRouter extends RouteProps {\r\n  text?: string;\r\n  icon?: string;\r\n}\r\n\r\n// TODO: 404 Page Not Found\r\nconst PageNotFound: FC = () => {\r\n  const goBack = useCallback(() => window.history.back(), []);\r\n\r\n  return (\r\n    <BsContainer className=\"not-found-404\">\r\n      <BsRow align=\"center\">\r\n        <BsCol width={{ def: 12, sm: 6, md: 4 }}>\r\n          <img className=\"img-fluid\" src={error404} alt=\"404\" />\r\n        </BsCol>\r\n      </BsRow>\r\n\r\n      <BsRow align=\"center\">\r\n        <BsCol className=\"text-center\">\r\n          <button type=\"button\" className=\"btn btn-lg btn-link\" onClick={goBack}>\r\n            <Fmsg id=\"BACK_TO_PREV_PAGE\" />\r\n          </button>\r\n        </BsCol>\r\n      </BsRow>\r\n    </BsContainer>\r\n  );\r\n};\r\n\r\n// TODO: Loading Mask\r\nconst LoadingMask: FC = () => {\r\n  const { Loading } = useLoading();\r\n\r\n  useEffect(() => {\r\n    Loading({ show: true });\r\n\r\n    return () => Loading({ show: false })\r\n  }, [ Loading ]);\r\n  return null;\r\n};\r\n\r\n// TODO: Loadable\r\nconst Loadable = ({ loader, loading = LoadingMask }: ILoadable) => class LoadableComponent extends Component<\r\n  RouteComponentProps<any>,\r\n  { Route: FC<RouteComponentProps<any>>; }\r\n> {\r\n  state = { Route: loading };\r\n\r\n  constructor(props: RouteComponentProps<any>) {\r\n    super(props);\r\n    loader().then(({ default: component }) => this.setState({ Route: component }));\r\n  }\r\n\r\n  render() {\r\n    const { Route } = this.state;\r\n\r\n    return (\r\n      <Route { ...this.props } />\r\n    );\r\n  }\r\n};\r\n  \r\n\r\n// TODO: Router Options\r\nconst router: IRouter[] = [{\r\n  path: '/',\r\n  exact: true,\r\n  component: App\r\n}, {\r\n  path: '/append',\r\n  text: 'APPEND_RECORD',\r\n  icon: 'fa fa-plus',\r\n  component: Loadable({\r\n    loader: () => import('../components/EditRecord'),\r\n    loading: LoadingMask\r\n  })\r\n}, {\r\n  path: '/update/:uid',\r\n  text: 'UPDATE_RECORD',\r\n  component: Loadable({\r\n    loader: () => import('../components/EditRecord'),\r\n    loading: LoadingMask\r\n  })\r\n}, {\r\n  path: '/cloud/:syncKey',\r\n  text: 'CLOUD_PROCESS',\r\n  component: Loadable({\r\n    loader: () => import('../components/CloudProcess'),\r\n    loading: LoadingMask\r\n  })\r\n}, {\r\n  path: '/cloud',\r\n  text: 'CLOUD_PROCESS',\r\n  component: Loadable({\r\n    loader: () => import('../components/CloudProcess'),\r\n    loading: LoadingMask\r\n  })\r\n}, {\r\n  component: PageNotFound\r\n}];\r\n\r\nexport default router;\r\n","import React, { FC, useRef, useCallback } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useI18n, LANG } from '../../services/i18n';\r\n\r\nimport Logo from '../../assets/imgs/cash-logo.svg';\r\n\r\n\r\n// TODO: Events\r\nconst useEvents = () => {\r\n  const { setLang } = useI18n();\r\n\r\n  return {\r\n    asEnglish: useCallback(() => setLang(LANG.EN), [ setLang ]),\r\n    asChinese: useCallback(() => setLang(LANG.ZH), [ setLang ])\r\n  };\r\n};\r\n\r\n// TODO: Components\r\nconst MainHeader: FC = () => {\r\n  const dropdown = useRef(null);\r\n  const { asEnglish, asChinese } = useEvents();\r\n\r\n  return (\r\n    <nav className=\"main-header navbar navbar-expand navbar-dark bg-dark text-secondary border-bottom border-white\">\r\n      <Link className=\"navbar-brand text-white\" to=\"/\">\r\n        <img className=\"rounded-circle\" src={ Logo } alt=\"Logo\" />\r\n      </Link>\r\n      \r\n      <div className=\"collapse navbar-collapse\">\r\n        <ul className=\"navbar-nav ml-auto\">\r\n          <li className=\"nav-item\">\r\n            <Link className=\"btn btn-link nav-link\" to=\"/cloud\">\r\n              <i className=\"fa fa-cloud\" />\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n\r\n        <ul className=\"lang-dropdown navbar-nav\">\r\n          <li ref={ dropdown } className=\"nav-item dropdown\">\r\n            <button type=\"button\" className=\"btn btn-link nav-link dropdown-toggle\" data-toggle=\"dropdown\">\r\n              <i className=\"fa fa-language mr-2\" />\r\n            </button>\r\n\r\n            <div className=\"dropdown-menu dropdown-menu-right\">\r\n              <button type=\"button\" className=\"dropdown-item\" onClick={ asEnglish }>English</button>\r\n              <button type=\"button\" className=\"dropdown-item\" onClick={ asChinese }>繁體中文</button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default MainHeader;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport uuidv4 from 'uuid/v4';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\n\nimport $ from 'jquery';\nimport 'hammerjs';\nimport 'popper.js';\n\nimport I18n from './services/i18n';\nimport LoadingMask from './services/loading';\nimport MessageBox from './services/message';\nimport SourceStore from './services/store/source';\nimport RecordStore from './services/store/record';\nimport routers from './services/router';\n\nimport MainHeader from './components/toolbar/MainHeader';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport './assets/css/main.scss';\n\n\n(window as any).$ = $;\n\nimport('bootstrap').then(() => {\n  ReactDOM.render((\n    <I18n>\n      <LoadingMask>\n        <MessageBox>\n          <HashRouter>\n            <MainHeader />\n\n            <div className=\"cash-map-app\">\n              <SourceStore>\n                <RecordStore>\n                  <Switch>\n                    { routers.map(options => <Route key={uuidv4()} {...options} />) }\n                  </Switch>\n                </RecordStore>\n              </SourceStore>\n            </div>\n          </HashRouter>\n        </MessageBox>\n      </LoadingMask>\n    </I18n>\n  ), document.getElementById('root'));\n\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: https://bit.ly/CRA-PWA\n  serviceWorker.unregister();\n});\n","import * as Firebase from 'firebase';\r\nimport Moment from 'moment';\r\n\r\nimport { Cycle, ISummary, IRecordData, IResponse, ISummaryParams } from './type';\r\nimport { FIREBASE_OPTIONS } from '../../../assets/config/api-key.json';\r\n\r\n// TODO: Basic\r\nconst Database = Firebase.initializeApp(FIREBASE_OPTIONS).database();\r\n\r\nconst getRef = (key: string) => Database.ref(key);\r\n\r\nconst getAvgAmount = (sumcycle: Cycle, { cycle = 'month', amount = 0 }: IRecordData): number => {\r\n  const daysInMonth = Moment(new Date()).daysInMonth();\r\n  const daysInYear  = Moment(`${ new Date().getFullYear() }/12/31`, 'YYYY/MM/DD').dayOfYear();\r\n\r\n  switch (sumcycle) {\r\n    case 'day': switch (cycle) {\r\n      case 'month' : return Math.floor(amount / daysInMonth);\r\n      case 'year'  : return Math.floor(amount / daysInYear);\r\n    }\r\n    break;\r\n    case 'month': switch (cycle) {\r\n      case 'day'  : return amount * daysInMonth;\r\n      case 'year' : return Math.floor(amount / 12);\r\n    }\r\n    break;\r\n    case 'year': switch (cycle) {\r\n      case 'day'   : return amount * daysInYear;\r\n      case 'month' : return amount * 12;\r\n    }\r\n    break;\r\n  }\r\n  return amount;\r\n};\r\n\r\nconst getSpecificSum = ({ cycle, ignore = false, list = []}: ISummaryParams) =>\r\n  list.filter(record => ignore || 'actual' === record.status).reduce((summary: ISummary, record) => {\r\n    const amount = getAvgAmount(summary.cycle, record);\r\n\r\n    if ('once' === record.cycle)\r\n      summary.deposit += amount * ('expenses' === record.type ? -1 : 1);\r\n    else switch (record.type) {\r\n      case 'income'   : summary.income   += amount; break;\r\n      case 'expenses' : summary.expenses += amount; break;\r\n      case 'deposit'  :\r\n        summary.deposit += amount;\r\n        summary.income  -= amount;\r\n        break;\r\n    }\r\n    return { ...summary, applicable: summary.income - summary.expenses };\r\n  }, { cycle, income: 0, expenses: 0, deposit: 0, applicable: 0 });\r\n\r\n\r\n// TODO: Export Methods\r\nconst isValid = (key: string): Promise<IResponse<boolean>> => new Promise(resolve =>\r\n  getRef(key).on('value', snapshot => resolve({\r\n    status  : 200,\r\n    content : snapshot.exists()\r\n  }))\r\n);\r\n\r\nconst findByUID = (key: string, uid: string): Promise<IResponse<IRecordData>> => new Promise((resolve, reject) =>\r\n  getRef(key).child(uid).on('value', snapshot => snapshot.val() === null ? reject(\r\n    'DATA_NOT_FOUND'\r\n  ) : resolve({\r\n    status  : 200,\r\n    content : { ...snapshot.val(), uid }\r\n  })));\r\n\r\nconst getList = (key: string, params: any = {}): Promise<IResponse<IRecordData[]>> => new Promise(resolve => \r\n  getRef(key).on('value', snapshot => resolve({\r\n    status  : 200,\r\n    content : Object.keys(snapshot.val() || {}).map(uid => ({ ...snapshot.val()[uid], uid })).filter(record =>\r\n      Object.keys(params).length === Object.keys(params).filter(param =>\r\n        !params[param] || record[param] === params[param]  \r\n      ).length\r\n    )\r\n  }))\r\n);\r\n\r\nconst getGroups = (key: string): Promise<IResponse<string[]>> => new Promise(resolve =>\r\n  getRef(key).on('value', snapshot => resolve({\r\n    status  : 200,\r\n    content : Object.keys(snapshot.val() || {})\r\n      .map(uid => snapshot.val()[uid].group)\r\n      .reduce((res: string[], group) => !group || res.indexOf(group) >= 0 ? res : [ ...res, group ], [])\r\n  }))\r\n);\r\n\r\nconst getSummary = (key: string, { cycle, ignore }: ISummaryParams): Promise<IResponse<ISummary>> => new Promise(resolve =>\r\n  getRef(key).on('value', snapshot => resolve({\r\n    status  : 200,\r\n    content : getSpecificSum({\r\n      cycle,\r\n      ignore,\r\n      list: Object.keys(snapshot.val() || {}).map(uid => snapshot.val()[uid])\r\n    })\r\n  }))\r\n);\r\n\r\nconst doAdd = (key: string, record: IRecordData): Promise<IResponse<boolean>> => {\r\n  delete record.uid;\r\n\r\n  return getRef(key).push(record).then(() => ({\r\n    status  : 200,\r\n    content : true\r\n  }));\r\n};\r\n\r\nconst doUpdate = (key: string, record: IRecordData): Promise<IResponse<boolean>> => {\r\n  const uid = record.uid || '';\r\n\r\n  delete record.uid;\r\n\r\n  return getRef(key).child(uid).update(record).then(() => ({\r\n    status  : 200,\r\n    content : true\r\n  }));\r\n};\r\n\r\nconst doRemove = (key: string, record: IRecordData): Promise<IResponse<boolean>> =>\r\n  getRef(key).child(record.uid || '').remove().then(() => ({\r\n    status  : 200,\r\n    content : true\r\n  }));\r\n\r\nconst doClear = (key: string): Promise<IResponse<boolean>> =>\r\n  getRef(key).remove().then(() => ({\r\n    status  : 200,\r\n    content : true\r\n  }));\r\n\r\nexport default {\r\n  getSpecificSum,\r\n\r\n  isValid,\r\n  findByUID,\r\n  getList,\r\n  getGroups,\r\n  getSummary,\r\n\r\n  doAdd,\r\n  doUpdate,\r\n  doRemove,\r\n  doClear\r\n};\r\n","import { Reducer } from 'react';\r\nimport FirebaseRecord from './firebase';\r\n\r\nimport {\r\n  ISummary,\r\n  IStoreState,\r\n  IStoreAction,\r\n  IDispatchState,\r\n  IDispatchAction,\r\n  IRecordData,\r\n  IResponse,\r\n  Cycle\r\n} from './type';\r\n\r\n\r\n// TODO: Functions\r\nconst emptyFn = () => {};\r\n\r\nconst toList = (list: {[ groupName: string ]: IRecordData[]; }): IRecordData[] =>\r\n  Object.keys(list).reduce(($list: IRecordData[], groupName: string) => [\r\n    ...$list,\r\n    ...list[ groupName ]\r\n  ], []);\r\n\r\nconst toGroup = (list: IRecordData[]): {[ groupName: string ]: IRecordData[]; } =>\r\n  list.sort(({ group: g1 = '' }, { group: g2 = '' }) =>\r\n    !g1 ? 1 : !g2 ? -1 : g1 > g2 ? 1 : g1 < g2 ? -1 : 0\r\n  ).reduce((map: {[ groupName: string ]: IRecordData[]; }, record) => ({\r\n    ...map,\r\n    [ record.group || 'UNGROUP' ]: [ ...map[ record.group || 'UNGROUP' ] || [], record ]\r\n  }), {});\r\n\r\nconst doReload = (sourceKey: string, cycle: Cycle, params: IRecordData, { status, content }: IResponse<boolean>) => new Promise<{\r\n  list    : IRecordData[];\r\n  group   : string[];\r\n  summary : ISummary;\r\n}>((resolve, reject) => {\r\n  if (status !== 200 || !content) reject(\r\n    'Error Request.'\r\n  );\r\n\r\n  FirebaseRecord.getList(sourceKey, params)\r\n    .then(({ content: list }) => FirebaseRecord.getGroups(sourceKey)\r\n      .then(({ content: group }) => (FirebaseRecord.getSummary(sourceKey, { cycle }) as Promise<IResponse<ISummary>>)\r\n        .then(({ content: summary }) => resolve({ list, group, summary }))\r\n      )\r\n    );\r\n});\r\n\r\n\r\n// TODO: Reducers\r\nexport const StateStore: Reducer<IStoreState, IStoreAction> = (state, {\r\n  data,\r\n  group   = state.group,\r\n  summary = state.summary,\r\n  list    = toList(state.list)\r\n}) => ({\r\n  group,\r\n  summary,\r\n  data : data === true ? state.data : data,\r\n  list : toGroup(list)\r\n});\r\n\r\nexport const DispatchStore: Reducer<IDispatchState, IDispatchAction> = (state, {\r\n  action,\r\n  params  : $params = {},\r\n  success = emptyFn,\r\n  fail    = emptyFn\r\n}) => {\r\n  const { dispatch, sourceKey, params, cycle } = state;\r\n\r\n  switch (action) {\r\n    case 'SUMMARY':\r\n      (FirebaseRecord.getSummary(sourceKey, { cycle: ($params.cycle || cycle) as Cycle }) as Promise<IResponse<ISummary>>)\r\n        .then(({ content }) => dispatch({ summary: content }))\r\n        .then(() => success(params))\r\n        .catch(e => fail(e, params));\r\n\r\n      return { dispatch, sourceKey, params, cycle: ($params.cycle || cycle) as Cycle };\r\n\r\n    case 'LIST':\r\n      FirebaseRecord.getList(sourceKey, $params)\r\n        .then(({ content }) => dispatch({ list: content }))\r\n        .then(() => success(params))\r\n        .catch(e => fail(e, params));\r\n\r\n      return { dispatch, sourceKey, cycle, params: $params };\r\n\r\n    case 'FIND':\r\n      FirebaseRecord.findByUID(sourceKey, $params.uid || '')\r\n        .then(({ content }) => dispatch({ data: !content ? true : content }))\r\n        .then(() => success(params))\r\n        .catch(e => fail(e, params));\r\n\r\n      break;\r\n\r\n    case 'GROUP':\r\n      FirebaseRecord.getGroups(sourceKey)\r\n        .then(({ content }) => dispatch({ group: content, data: true }))\r\n        .then(() => success(params))\r\n        .catch(e => fail(e, params));\r\n\r\n      break;\r\n\r\n    case 'CREATE':\r\n      FirebaseRecord.doAdd(sourceKey, $params)\r\n        .then(res => doReload(sourceKey, cycle, params, res)\r\n          .then(({ list, group, summary }) => dispatch({ list, group, summary }))\r\n          .then(() => success(params))\r\n        )\r\n        .catch(e => fail(e, params));\r\n\r\n      break;\r\n\r\n    case 'UPDATE':\r\n      FirebaseRecord.doUpdate(sourceKey, $params)\r\n        .then(res => doReload(sourceKey, cycle, params, res)\r\n          .then(({ list, group, summary }) => dispatch({ list, group, summary }))\r\n          .then(() => success(params))\r\n        )\r\n        .catch(e => fail(e, params));\r\n\r\n    break;\r\n\r\n    case 'REMOVE':\r\n      FirebaseRecord.doRemove(sourceKey, $params)\r\n        .then(res => doReload(sourceKey, cycle, params, res)\r\n          .then(({ list, group, summary }) => dispatch({ list, group, summary }))\r\n          .then(() => success(params))\r\n        )\r\n        .catch(e => fail(e, params));\r\n\r\n      break;\r\n\r\n    case 'CLEAR':\r\n      FirebaseRecord.doClear(sourceKey)\r\n        .then(() => dispatch({\r\n          list    : [],\r\n          group   : [],\r\n          summary : { cycle, income: 0, expenses: 0, deposit: 0, applicable: 0 }\r\n        }))\r\n        .then(() => success(params))\r\n        .catch(e => fail(e, params));\r\n\r\n      break;\r\n  }\r\n  return state;\r\n};\r\n","import { Dispatch, SetStateAction, useState } from 'react';\r\n\r\nimport Moment from 'moment';\r\nimport uuidv4 from 'uuid/v4';\r\n\r\n\r\nconst DATE_FROMAT: string = 'YYYY/MM';\r\n\r\n// TODO: Basic Types\r\nexport type Cycle = 'day' | 'month' | 'year';\r\n\r\nexport interface ISummary { cycle: Cycle; income: number; expenses: number; deposit: number; applicable: number; }\r\n\r\nexport interface IRecordData {\r\n  uid    ?: string;    desc    ?: string;\r\n  type   ?: string;    status  ?: string;\r\n  cycle  ?: string;    validFm ?: string;\r\n  amount ?: number;    validTo ?: string;\r\n  group  ?: string;\r\n}\r\n\r\nexport interface IResponse<T> { status: number; content: T; message?: string; }\r\n\r\nexport interface ISummaryParams { cycle: Cycle; ignore?: boolean; list?: IRecordData[]; }\r\n\r\nexport class RecordModel {\r\n  private $uid     !: string;\r\n  private $desc    !: [ string, Dispatch<SetStateAction<string>> ];\r\n  private $type    !: [ string, Dispatch<SetStateAction<string>> ];\r\n  private $status  !: [ string, Dispatch<SetStateAction<string>> ];\r\n  private $cycle   !: [ string, Dispatch<SetStateAction<string>> ];\r\n  private $group   !: [ string, Dispatch<SetStateAction<string>> ];\r\n  private $validFm !: [ string, Dispatch<SetStateAction<string>> ];\r\n  private $validTo !: [ string, Dispatch<SetStateAction<string>> ];\r\n  private $amount  !: [ number, Dispatch<SetStateAction<number>> ];\r\n\r\n  constructor({\r\n    uid     = uuidv4() , desc    = '' , \r\n    type    = 'income' , status  = 'expected',\r\n    cycle   = 'month'  , validFm = Moment(new Date()).format(DATE_FROMAT),\r\n    validTo = ''       , group   = '',\r\n    amount  = 0\r\n  }: IRecordData = {}) {\r\n    this.$uid     = uid;                  this.$desc    = useState(desc);\r\n    this.$type    = useState(type);       this.$status  = useState(status);\r\n    this.$cycle   = useState(cycle);      this.$validFm = useState(validFm);\r\n    this.$validTo = useState(validTo);    this.$amount  = useState(amount);\r\n    this.$group   = useState(group);\r\n  }\r\n\r\n  get uid(): string { return this.$uid; }\r\n  \r\n  get desc(): string { return this.$desc[0]; }\r\n  set desc(value: string) { this.$desc[1](value); }\r\n\r\n  get type(): string { return this.$type[0]; }               get status(): string { return this.$status[0]; }\r\n  set type(value: string) { this.$type[1](value); }          set status(value: string) { this.$status[1](value); }\r\n\r\n  get cycle(): string { return this.$cycle[0]; }             get validFm(): string { return this.$validFm[0]; }\r\n  set cycle(value: string) { this.$cycle[1](value); }        set validFm(value: string) { this.$validFm[1](value); }\r\n\r\n  get validTo(): string { return this.$validTo[0]; }         get amount(): number { return this.$amount[0]; }\r\n  set validTo(value: string) { this.$validTo[1](value); }    set amount(value: number) { this.$amount[1](value); }\r\n\r\n  get group(): string { return this.$group[0]; }\r\n  set group(value: string) { this.$group[1](value); }\r\n\r\n  get vdateFm(): Date | null { return this.validFm ? Moment(this.validFm + '/01', 'YYYY/MM/DD').toDate() : null; }\r\n  set vdateFm(value: Date | null) { this.validFm = !value ? '' : Moment(value).format(DATE_FROMAT); }\r\n\r\n  get vdateTo(): Date | null { return this.validTo ? Moment(this.validTo + '/01', 'YYYY/MM/DD').toDate() : null; }\r\n  set vdateTo(value: Date | null) { this.validTo = !value ? '' : Moment(value).format(DATE_FROMAT); }\r\n\r\n  get amountStr(): string { return this.amount ? this.amount.toString() : ''; }\r\n  set amountStr(value: string) {\r\n    const amt = parseFloat(value);\r\n\r\n    this.amount = !isNaN(amt) ? amt : 0;\r\n  }\r\n\r\n  getJSON(showID: boolean = true): IRecordData {\r\n    return {\r\n      desc   : this.desc   , status  : this.status  ,\r\n      type   : this.type   , validFm : this.validFm ,\r\n      cycle  : this.cycle  , validTo : this.validTo ,\r\n      group  : this.group  ,\r\n      amount : this.amount , ...( showID ? { uid: this.uid } : {})\r\n    };\r\n  }\r\n\r\n  reset(): void {\r\n    this.$uid   = uuidv4();    this.desc    = '';\r\n    this.type   = 'income';    this.status  = 'actual';\r\n    this.cycle  = 'month';     this.validFm = Moment(new Date()).format(DATE_FROMAT);\r\n    this.amount = 0;           this.validTo = '';\r\n    this.group  = '';\r\n  }\r\n}\r\n\r\n\r\n// TODO: Reducer Types\r\nexport interface IDispatchState {\r\n  params    : IRecordData;\r\n  sourceKey : string;\r\n  cycle     : 'day' | 'month' | 'year';\r\n  dispatch  : Dispatch<IStoreAction>;\r\n}\r\n\r\nexport interface IDispatchAction {\r\n  action   : 'SWITCH' | 'LIST' | 'FIND' | 'GROUP' | 'CREATE' | 'UPDATE' | 'REMOVE' | 'CLEAR' | 'SUMMARY';\r\n  params  ?: IRecordData;\r\n  success ?: (params: IRecordData) => void;\r\n  fail    ?: (e: Error, params?: IRecordData) => void;\r\n}\r\n\r\nexport interface IStoreAction {\r\n  data    ?: IRecordData | true;\r\n  summary ?: ISummary;\r\n  group   ?: string[];\r\n  list    ?: IRecordData[];\r\n}\r\n\r\nexport interface IStoreState {\r\n  data    ?: IRecordData;\r\n  summary  : ISummary;\r\n  group    : string[];\r\n  list     : {[ groupName: string ]: IRecordData[]; };\r\n}\r\n","import React, { FC, ReactNode, Dispatch, createContext, useReducer, useContext } from 'react';\r\nimport { useSource } from '../source';\r\n\r\nimport { StateStore, DispatchStore } from './reducer';\r\nimport FirebaseRecord from './firebase';\r\n\r\nimport {\r\n  Cycle,\r\n  ISummary,\r\n  IDispatchAction,\r\n  IStoreState,\r\n  IStoreAction,\r\n  IRecordData,\r\n  RecordModel\r\n} from './type';\r\n\r\n\r\n// TODO: Variables\r\nconst STORE_DISPATCH = Symbol('STORE_DISPATCH');\r\nconst DEFAULT_STATE: IStoreState = {\r\n  list    : {},\r\n  group   : [],\r\n  summary : {\r\n    cycle      : 'month',\r\n    income     : 0,\r\n    expenses   : 0,\r\n    deposit    : 0,\r\n    applicable : 0\r\n  }\r\n};\r\n\r\n// TODO: Export Basic\r\nexport type Cycle = Cycle;\r\nexport type ISummary = ISummary;\r\nexport type IRecordData = IRecordData;\r\nexport { RecordModel };\r\n\r\ninterface IRecordContext extends IStoreState {\r\n  dispatch           : Dispatch<IDispatchAction>;\r\n  [ STORE_DISPATCH ] : Dispatch<IStoreAction>;\r\n}\r\n\r\n\r\n// TODO: Context Components\r\nexport const isKeyValid = FirebaseRecord.isValid;\r\nexport const getSummary = FirebaseRecord.getSpecificSum;\r\nexport const useRecord = () => useContext(RecordContext);\r\n\r\nconst RecordContext = createContext<IRecordContext>({\r\n  ...DEFAULT_STATE,\r\n  dispatch: () => {},\r\n  [ STORE_DISPATCH ]: () => {}\r\n});\r\n\r\nconst RecordStore: FC<{ children: ReactNode; }> = ({ children }) => {\r\n  const { sourceKey } = useSource();\r\n  const [ store, $dispatch ] = useReducer(StateStore, DEFAULT_STATE);\r\n  const dispatch = useReducer(DispatchStore, { sourceKey, params: {}, cycle: 'month', dispatch: $dispatch });\r\n\r\n  return (\r\n    <RecordContext.Provider value={{ ...store, dispatch: dispatch[1], [ STORE_DISPATCH ]: $dispatch }}>\r\n      { children }\r\n    </RecordContext.Provider>\r\n  );\r\n};\r\n\r\nexport default RecordStore;\r\n"],"sourceRoot":""}